<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="AaronChan Blog">
<meta property="og:url" content="https://yoursite.com/index.html">
<meta property="og:site_name" content="AaronChan Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AaronChan Blog">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://yoursite.com/"/>

  <title> AaronChan Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?51f0c6f8829e2634ec8f9bfc8220f514";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">AaronChan Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">陈晓城</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/15/unit-test-java/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-02-15T23:27:59+08:00" content="2017-02-15">
              2017-02-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/15/unit-test-java/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/15/unit-test-java/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>title: 《单元测试之道Java版》读书笔记<br>tags: [测试,读书,Java]<br>date: 2017-2-15 22:58:00</p>
<h2 id="categories-技术"><a href="#categories-技术" class="headerlink" title="categories: 技术"></a>categories: 技术</h2><h4 id="单元测试的定义"><a href="#单元测试的定义" class="headerlink" title="单元测试的定义"></a>单元测试的定义</h4><p>来自：<a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95" title="维基百科" target="_blank" rel="external">维基百科</a></p>
<blockquote>
<p>在计算机编程中，单元测试（英语：Unit Testing）又称为模块测试, 是针对程序模块（软件设计的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在过程化编程中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。<br>通常来说，程序员每修改一次程序就会进行最少一次单元测试，在编写程序的过程中前后很可能要进行多次单元测试，以证实程序达到软件规格书要求的工作目标，没有程序错误；虽然单元测试不是什么必须的，但也不坏，这牵涉到项目管理的政策决定。</p>
</blockquote>
<h4 id="单元测试的内容（Right-BICEP）"><a href="#单元测试的内容（Right-BICEP）" class="headerlink" title="单元测试的内容（Right-BICEP）"></a>单元测试的内容（Right-BICEP）</h4><h5 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h5><ul>
<li>Right：结果是否正确？</li>
<li>B：是否所有边界条件都是正确？</li>
<li>I：能查下反向关联？</li>
<li>C：能用 <strong><em>交叉手段</em></strong>检查一下结果？</li>
<li>E：是否强制错误条件发生（模拟错误发生）</li>
<li>P：是否满足性能要求</li>
</ul>
<h5 id="结果是否正确"><a href="#结果是否正确" class="headerlink" title="结果是否正确"></a>结果是否正确</h5><ol>
<li>验证结果的正确性需要 <strong><em>了解需求</em></strong>,可以通过需求文档来了解；在需求文档不充足或者不完整的情况下，可以站在用户的角度去思考期望的结果是什么。</li>
<li>针对大量测试需要数据文件，在构造 <strong><em>测试数据</em></strong>的时候需要倍加小心</li>
</ol>
<h5 id="边界条件"><a href="#边界条件" class="headerlink" title="边界条件"></a>边界条件</h5><ol>
<li>举例：<ol>
<li>格式错误的数据（如输入手机号是包含英文字母）</li>
<li>空值或者不完整的数据（如null,””等）</li>
<li>不在预期的合理值范围内（目前没有大于1000岁的人）</li>
<li>事情的到达的次序不一样，可以理解为是前提条件（如未登录就尝试读取用户数据）</li>
</ol>
</li>
<li>总结：<ol>
<li>一致性 Conformance ：值是否与预期一致</li>
<li>顺序性 Ordering ：值是有序还是无序</li>
<li>区间性 Range ：值是否在合理的区间内</li>
<li>依赖性 Reference ：代码是否引用了代码无法控制的外部资源（如数据库）</li>
<li>存在性 Existence ：值是否存在（是否非null，非0，非””）</li>
<li>基数性 Cardinatity ：是否有足够的值</li>
<li>相对或者绝对的时间性 Time ：所有事情是否发生有序？是否在正确时间执行？是否恰好及时？</li>
</ol>
</li>
</ol>
<h5 id="检查反向关联"><a href="#检查反向关联" class="headerlink" title="检查反向关联"></a>检查反向关联</h5><ol>
<li>通过反向的逻辑关系来验证</li>
<li>例子：<ul>
<li>插入数据库，可以通过查询数据库来验证</li>
<li>写入文件，可以通过读取文件内容来验证</li>
</ul>
</li>
</ol>
<h5 id="使用其他手段来交叉检查"><a href="#使用其他手段来交叉检查" class="headerlink" title="使用其他手段来交叉检查"></a>使用其他手段来交叉检查</h5><ol>
<li>交叉检查就是被测试的方法A有与其相同功能但使用了另一套算法的方法B，但由于一些原因（性能不佳）不在项目中使用，利用B来验证A的结果正确性</li>
<li>使用与操作值有约束关系的其他数据来验证：如在图书管理系统中，借出数增加，留存数肯定是下降的</li>
</ol>
<h5 id="强制错误发生条件"><a href="#强制错误发生条件" class="headerlink" title="强制错误发生条件"></a>强制错误发生条件</h5><ol>
<li>主要是人为制作硬件环境或者运行环境的错误</li>
<li>checkList：<ul>
<li>内存耗光</li>
<li>磁盘用满</li>
<li>时钟出问题</li>
<li>网络不可用</li>
<li>系统过载</li>
</ul>
</li>
</ol>
<h5 id="性能特性"><a href="#性能特性" class="headerlink" title="性能特性"></a>性能特性</h5><ol>
<li>不是性能而是性能特性：性能随着规模的增加的变化趋势</li>
</ol>
<h5 id="边界条件详解"><a href="#边界条件详解" class="headerlink" title="边界条件详解"></a>边界条件详解</h5><ol>
<li>一致性：类似于数据的格式是否跟预期一致</li>
<li>有序性：数据是否按照某种特定顺序排序</li>
<li>区间性：<ul>
<li>索引：负 越界等</li>
<li>值的预期区间</li>
</ul>
</li>
<li>依赖性/耦合性：<ul>
<li>前条件：方法运行需要系统处于什么状态</li>
<li>后条件：方法存在任何副作用都需要检查</li>
</ul>
</li>
<li>存在性：给定事物是否存在</li>
<li>基数性：考虑0-1-n三种情况，其中n是随着业务的变化而变化<ul>
<li>例子：订单的前十名：订单少于10个；订单等于10个；订单为0</li>
</ul>
</li>
<li>时间性：<ul>
<li>相对时间（方法执行顺序）</li>
<li>绝对时间（耗时（超时）或者时钟的时间）</li>
<li>并发问题（多线程或者多进程问题）</li>
</ul>
</li>
</ol>
<h4 id="使用MOCK对象"><a href="#使用MOCK对象" class="headerlink" title="使用MOCK对象"></a>使用MOCK对象</h4><h5 id="合适使用MOCK对象"><a href="#合适使用MOCK对象" class="headerlink" title="合适使用MOCK对象"></a>合适使用MOCK对象</h5><ol>
<li>真实对象具有不可确定的行为</li>
<li>真实对象很难被创建</li>
<li>真实对象的某些行为很难触发（如网络错误）</li>
<li>真实对象令程序的运行速度很慢</li>
<li>真实对象有用户界面</li>
<li>测试需要询问真实对象是如何被调用的（验证对象某个函数是否被调用）</li>
<li>真实对象并不存在（需要不同开发小组或者跟新硬件系统打交道）</li>
</ol>
<h5 id="MOCK步骤"><a href="#MOCK步骤" class="headerlink" title="MOCK步骤"></a>MOCK步骤</h5><ol>
<li>使用一个接口来描述一个对象</li>
<li>为产品代码实现这个接口</li>
<li>以测试为目的，在mock对象中实现这个接口</li>
</ol>
<h4 id="好的测试需要具备的品质（A-TRIP）"><a href="#好的测试需要具备的品质（A-TRIP）" class="headerlink" title="好的测试需要具备的品质（A-TRIP）"></a>好的测试需要具备的品质（A-TRIP）</h4><h5 id="自动化（Automatic）"><a href="#自动化（Automatic）" class="headerlink" title="自动化（Automatic）"></a>自动化（Automatic）</h5><ol>
<li>概述：调用测试自动化和检查结果自动化</li>
<li>拓展：持续构建</li>
</ol>
<h5 id="彻底的（Thorough）"><a href="#彻底的（Thorough）" class="headerlink" title="彻底的（Thorough）"></a>彻底的（Thorough）</h5><ol>
<li>取舍：是测试都覆盖全部代码分支还是仅仅测试最可能的情况</li>
<li>通过相关的代码覆盖工具进行检查</li>
</ol>
<h5 id="可重复（Repeatable）"><a href="#可重复（Repeatable）" class="headerlink" title="可重复（Repeatable）"></a>可重复（Repeatable）</h5><ol>
<li>测试必须不随顺序影响或者外部条件变化，每次都出现 <strong><em>相同的结果</em></strong>，也就是说必要时应该Mock来隔离外部因素，使测试能够独立与外部，也就是说测试是运行在 <strong><em>sanbox</em></strong>沙盒里面</li>
</ol>
<h5 id="独立的（Independent）"><a href="#独立的（Independent）" class="headerlink" title="独立的（Independent）"></a>独立的（Independent）</h5><ol>
<li>一个测试函数应该专注于一个目标函数或者组合起来的共同提供某个特性的一组函数</li>
<li>一个测试函数不能依赖与另一个测试函数，也就是不能假定测试函数的执行顺序，因为随着测试数目的增加，这种顺序将变得难以管理。最好是通过setup和teardown来确保每个测试都有一个新的开始。</li>
<li>每个测试函数都是一个 <strong><em>孤岛</em></strong></li>
</ol>
<h5 id="专业的（Professional）"><a href="#专业的（Professional）" class="headerlink" title="专业的（Professional）"></a>专业的（Professional）</h5><ol>
<li>跟编写产品代码一样，一旦发现有代码冗余重复，就应该重构将该功能放到一个函数里面。</li>
<li>保持简洁和精炼，设计要良好且重构充分，<strong><em>对待测试代码应该对待产品代码一样</em></strong></li>
<li>不要为了测试而测试，对于发生可能性很低的错误不要进行测试</li>
<li>自设圈套:让产品产生想要测试的bug，验证测试是否失败</li>
</ol>
<h4 id="项目中进行测试"><a href="#项目中进行测试" class="headerlink" title="项目中进行测试"></a>项目中进行测试</h4><h5 id="测试与评审"><a href="#测试与评审" class="headerlink" title="测试与评审"></a>测试与评审</h5><ol>
<li>编写test case 和/或测试代码</li>
<li>评审test case 和/或测试代码</li>
<li>经评审修改test case 和/或测试代码</li>
<li>编写能通过所有测试的产品代码</li>
<li>评审产品代码和测试代码</li>
<li>在每次评审后，修改测试代码和产品代码</li>
</ol>
<h4 id="设计话题"><a href="#设计话题" class="headerlink" title="设计话题"></a>设计话题</h4><h5 id="面向测试设计"><a href="#面向测试设计" class="headerlink" title="面向测试设计"></a>面向测试设计</h5><ol>
<li>关注点分离，包括：封装性，正交性、耦合性和所有一切编写shycode的计算机科学概念</li>
<li>比如一个函数有多个操作，可以将多个操作分离到各个方法里面这样就可以独立进行测试</li>
</ol>
<h5 id="为测试而重构"><a href="#为测试而重构" class="headerlink" title="为测试而重构"></a>为测试而重构</h5><h5 id="测试类的不变性"><a href="#测试类的不变性" class="headerlink" title="测试类的不变性"></a>测试类的不变性</h5><ol>
<li>跟上述测试的内容有重合的部分，不再赘述</li>
</ol>
<h5 id="测试驱动设计-TDD"><a href="#测试驱动设计-TDD" class="headerlink" title="测试驱动设计 TDD"></a>测试驱动设计 TDD</h5><p>TDD：在编写代码之前先编写测试代码</p>
<p>只是做了简单的介绍；TDD好处在于你把自己当成产品的用户，在这个角度你对代码所提供的接口有了更多的感知，从而做出更好的设计</p>
<h5 id="测试无效参数"><a href="#测试无效参数" class="headerlink" title="测试无效参数"></a>测试无效参数</h5><p>无效参数在哪里检查呢？</p>
<ul>
<li>要是在系统任意部分都做检查，显然会出现重复检查的情况（违反DRY）原则且浪费精力和时间</li>
<li>通常是采用“不让野蛮人入门”的想法，在系统的入口对参数进行检查，然后系统内部就可以信任这些数据了</li>
</ul>
<p>[2]: </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/23/算法-查找/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-23T22:38:59+08:00" content="2016-12-23">
              2016-12-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/23/算法-查找/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/23/算法-查找/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="3-2-二叉查找树"><a href="#3-2-二叉查找树" class="headerlink" title="3.2 二叉查找树"></a>3.2 二叉查找树</h2><ol>
<li>定义：二叉查找树就是一个二叉树。其中每个借点都含有一个compareable的键且每个结点都含有一个左连接和右连接，且每个结点上的都大于左子树上任意结点的键，小于右子树上任意结点的键。</li>
<li>代码：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    Node root;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node left;</span><br><span class="line">        Node right;</span><br><span class="line">        <span class="keyword">int</span> N;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key, Value value,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.N = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//添加</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span></span>&#123;</span><br><span class="line">       root =  put(root,key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">put</span><span class="params">(Node node, Key key, Value value)</span></span>&#123;</span><br><span class="line">        <span class="comment">//如果结点为空 新建结点</span></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 键与结点的键比较</span></span><br><span class="line">        <span class="keyword">int</span> compareTo =key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo &gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//大于结点的键，则向右子树加入键</span></span><br><span class="line">            node.right = put(node.right,key,value);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span> )&#123;</span><br><span class="line">            <span class="comment">//小于结点的键，则向左子树加入键</span></span><br><span class="line">           node.left=  put(node.left,key,value);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//相等则替换结点的值</span></span><br><span class="line">            node.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//重新计数</span></span><br><span class="line">        node.N = size(node.left)+<span class="number">1</span>+size(node.right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node== <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.N;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> get(root,key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Value <span class="title">get</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 结点为null返回null</span></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 键与结点的键比较</span></span><br><span class="line">        <span class="keyword">int</span> compareTo =key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo &gt;<span class="number">0</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> get(node.right,key);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span> )&#123;</span><br><span class="line">           <span class="keyword">return</span>  get(node.left,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> min(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Key <span class="title">min</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.left !=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> min(node.left)</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> node.key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//小于等于key的最大key</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">floor</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> floor(node,key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Key <span class="title">floor</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 键与结点的键比较</span></span><br><span class="line">        <span class="keyword">int</span> compare = key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo &gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//找到右子树小于等于该键的键</span></span><br><span class="line">            Key rightMin = floor(node.right,key);</span><br><span class="line">            <span class="comment">//没有找到 自己为小于等于该键最大的键</span></span><br><span class="line">            <span class="keyword">if</span>(rightMin == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> node.key;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//有则返回该键</span></span><br><span class="line">                <span class="keyword">return</span> rightMin;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span> )&#123;</span><br><span class="line">            <span class="comment">//从左子树查找</span></span><br><span class="line">           <span class="keyword">return</span>  floor(node.left,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">select</span><span class="params">(<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> select(root,rank);</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Key <span class="title">select</span><span class="params">(Node node,<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> size =size(node.left);</span><br><span class="line">        <span class="keyword">if</span>(size&lt; rank)&#123;</span><br><span class="line">            <span class="keyword">return</span> select(node.right,(rank-size-<span class="number">1</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(size&gt;rank)&#123;</span><br><span class="line">            <span class="keyword">return</span> select(node.left,rank);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rank(root,key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">int</span> compareTo =key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo&lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> rank(node.left,key));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> size(node.left)+<span class="number">1</span>+rank(node.right,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">      root =  deleteMin(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">deleteMin</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">           node.left =  deleteMin(node.left);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> node.right;</span><br><span class="line">        &#125;</span><br><span class="line">        node.N = size(node.left)+size(node.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">      root =  delete(root,key);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">delete</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> compareTo = key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            node.right = delete(node.right,key);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span>)&#123;</span><br><span class="line">            node.left = delete(node.left,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 右树为空 新结点为左子树</span></span><br><span class="line">            <span class="keyword">if</span>(node.right==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> node.left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 左子树为空，新节点为右子树</span></span><br><span class="line">            <span class="keyword">if</span>(node.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> node.right;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">             Node minNode = min(node.right);</span><br><span class="line">            Node t= node;</span><br><span class="line">            node = minNode;</span><br><span class="line">            node.right = deleteMin(t.right);</span><br><span class="line">            node.left = t.left; </span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">        node.N = size(node.left)+size(node.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys(min(),max());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">(Key lo ,Key hi)</span></span>&#123;</span><br><span class="line">        Queue&lt;Key&gt; queue = <span class="keyword">new</span> Queue&lt;Key&gt;();</span><br><span class="line">         keys(root,queue,lo,hi);</span><br><span class="line">         <span class="keyword">return</span> queue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">keys</span><span class="params">(Node node,Queue&lt;Key&gt; queue,Key lo ,Key hi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)<span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">int</span> compareLo = lo.compareTo(node.key);</span><br><span class="line">        <span class="keyword">int</span> compareHi = hi.compareTo(node.key);</span><br><span class="line">        <span class="comment">//查左树</span></span><br><span class="line">        <span class="keyword">if</span>(compareLo&lt;<span class="number">0</span> )&#123;</span><br><span class="line">            keys(node.left,lo,hi);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//结点</span></span><br><span class="line">        <span class="keyword">if</span>(compareHi&gt;=<span class="number">0</span> || compareLo&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">             queue.enqueue(node.key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//查右树</span></span><br><span class="line">        <span class="keyword">if</span>(compareHi&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            keys(node.right,lo,hi);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>3.性能：</p>
<blockquote>
<p>在由N个随机键构成的二叉查找树中，查找命中平均所需的比较次数为~2lnN(约1.39lgN)</p>
<p>在由N个随机键构成的二叉查找树中插入和查找命中未命中的元素平均所需的比较次数为~2lnN(约1.39lgN)</p>
</blockquote>
<h2 id="3-3-平衡查找树"><a href="#3-3-平衡查找树" class="headerlink" title="3.3 平衡查找树"></a>3.3 平衡查找树</h2><h3 id="3-3-1-2-3查找树"><a href="#3-3-1-2-3查找树" class="headerlink" title="3.3.1 2-3查找树"></a>3.3.1 2-3查找树</h3><ol>
<li>定义：一棵2-3查找树或为一棵空疏，或由以下结点组成：<ul>
<li>2-结点：含有一个键（及其对应的值）和两条链接，左链接指向的2-3树中的键都小于该结点，右链接指向2-3树中的键都大于该结点。</li>
<li>3-结点：含有两个键（及其对应的值）和三条链接，左链接指向的2-3树中的键都小于该结点，中链接指向2-3树中的键都位于该结点的两个键之间，右链接指向2-3树中的键都大于该结点。</li>
</ul>
</li>
<li>原理：<ul>
<li>向2-结点插入新结点:只要变成3-结点即可</li>
<li>向一棵只含有一个3-结点的树中插入新键：<ul>
<li>变成4-结点，然后中键上移变成由3个2-结点组成的2-3树</li>
</ul>
</li>
<li>向一个父节点为2-结点的3-结点中插入新键<ul>
<li>变成4-结点，然后中键上移父节点变成3-结点</li>
</ul>
</li>
<li>向一个父节点为3-结点的3-结点中插入新键<ul>
<li>变成4-结点，然后中键上移父节点变成4-结点，父节点再逐级向上分解。</li>
</ul>
</li>
</ul>
</li>
<li>性能：</li>
</ol>
<blockquote>
<p>  在一棵大小为N的2-3树中，查找和插入操作访问的结点必然不超过lgN个</p>
</blockquote>
<h3 id="3-3-2-红黑树"><a href="#3-3-2-红黑树" class="headerlink" title="3.3.2 红黑树"></a>3.3.2 红黑树</h3><ol>
<li><p>定义：将树的类型分为两种：红链接将两个2-结点连接起来构成3-结点，黑链接则是2-3树种的普通链接。<br>另外一种定义：</p>
<ul>
<li>红链接都为左链接</li>
<li>没有任意一个结点与两条红链接相连</li>
<li>该树是完美黑色平衡的，即任意空链接到根结点的路径上的黑链接数量相同。</li>
</ul>
</li>
<li><p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line">    <span class="keyword">boolean</span> color;</span><br><span class="line">    Key key;</span><br><span class="line">    Value value;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key,Value value,<span class="keyword">boolean</span> color,<span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">        <span class="keyword">this</span>.N = N;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//左旋转</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">rotateLeft</span><span class="params">(Node h)</span></span>&#123;</span><br><span class="line">    Node x = h.right;</span><br><span class="line">    h.right = x.left;</span><br><span class="line">    x.left = h;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    x.N = h.N;</span><br><span class="line">    h.N = size(h.left)+<span class="number">1</span>+size(h.right);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//右旋转</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">rotateRight</span><span class="params">(Node h)</span></span>&#123;</span><br><span class="line">    Node x = h.left;</span><br><span class="line">    x.right = h;</span><br><span class="line">    h.left = h.right;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    x.N = h.N;</span><br><span class="line">    h.N = size(h.left)+<span class="number">1</span>+size(h.right);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//颜色转换</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flipColor</span><span class="params">(Node h)</span></span>&#123;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    h.left.color = BLACK;</span><br><span class="line">    h.right.color = BLACK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedBlackBST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">   Node root;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        root = put(root,key,value);</span><br><span class="line">        root.color =BLACK;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.color;</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node node,Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value,RED,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//跟二叉查找树一样</span></span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">           node.right =  put(node.right,key,value);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cmp&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                node.left =  put(node.left,key,value);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                  node.value = value;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//右子结点为红链接且左子结点是黑链接-》左旋</span></span><br><span class="line">        <span class="keyword">if</span>(isRed(node.right) &amp;&amp; !isRed(node.left))&#123;</span><br><span class="line">           <span class="keyword">return</span>  rotateLeft(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//左子结点为红链接且左子结点的左子结点是红链接-》右旋</span></span><br><span class="line">        <span class="keyword">if</span>(isRed(node.left) &amp;&amp; isRed(node.left.left))&#123;</span><br><span class="line">           <span class="keyword">return</span> rotateRight(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//左子结点为红链接且右子结点是红链接-》颜色转换</span></span><br><span class="line">        <span class="keyword">if</span>(isRed(node.left &amp;&amp; isRed(node.right)))&#123;</span><br><span class="line">            flipColor(node);</span><br><span class="line">        &#125;</span><br><span class="line">        node.N = size(node.left)+<span class="number">1</span>size(node.right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.性能：</p>
<blockquote>
<p>一棵大小为N的红黑树的高度不会超过2lgN</p>
<p>一棵大小为N的红黑树中，根结点到任意结点的平均路径长度为~1.00lgN。</p>
</blockquote>
<h2 id="3-4-散列表"><a href="#3-4-散列表" class="headerlink" title="3.4 散列表"></a>3.4 散列表</h2><ol>
<li>原理：<ul>
<li>第一步用 <strong><em>散列函数</em></strong>将被查找的键转化为数组的一个索引</li>
<li>第二步处理碰撞冲突（用散列函数生成的索引冲突）<ul>
<li>解决的方法：<strong><em>拉链法</em></strong>   和  <strong><em>碰撞法</em></strong></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="3-4-1-散列函数"><a href="#3-4-1-散列函数" class="headerlink" title="3.4.1 散列函数"></a>3.4.1 散列函数</h3><ol>
<li>对于每一种类型的键都需要一个与之对应的散列函数。</li>
<li><p>方法：</p>
<ul>
<li>整型：除留余数法 选择一个素数M；然后键的索引=<code>k%M</code></li>
<li>浮点数：将键编程二进制数然后再使用除留余数法</li>
<li><p>字符串：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s.length();i++)&#123;</span><br><span class="line">   hash = (R * hash + s.charAt(i)) % M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将hashCode()的返回值转化为一个数组索引</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x.hashCode() &amp;&amp; <span class="number">0x7fffffff</span>)%M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="3-4-2-基于拉链法的散列表"><a href="#3-4-2-基于拉链法的散列表" class="headerlink" title="3.4.2 基于拉链法的散列表"></a>3.4.2 基于拉链法的散列表</h3><ol>
<li>原理：选择足够大的M，使得所有链表都尽可能短以保证高效的查找。</li>
<li>查找：先根据散列值找到链表。然后沿着链表顺序查找相应的键。</li>
<li><p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeparteChainingHashST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;<span class="comment">//键值对的总数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M;<span class="comment">//散列表的大小</span></span><br><span class="line">    <span class="keyword">private</span> SquenticalSearchST&lt;Key,Value&gt;[] st;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SeparteChainingHashST</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">997</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SeparteChainingHashST</span><span class="params">(<span class="keyword">int</span> M)</span></span>&#123;</span><br><span class="line">        SquenticalSearchST&lt;Key,Value&gt;[] st = <span class="keyword">new</span> (SquenticalSearchST&lt;Key,Value&gt;)SquenticalSearchST[M];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i&lt;M; i++)&#123;</span><br><span class="line">            st[i] = <span class="keyword">new</span> SquenticalSearchST();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span>  <span class="title">hash</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (key.hashCode() &amp; <span class="number">0x7fffffff</span>)%M;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        st[hash(key)].put(key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Value)st[hash(key)].get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>性质：</p>
<ul>
<li>在一张含有M条链表和N个键的散列表中，任意一条链表中的键的数量均在N/M的常数因子内的概率无限接近于1.</li>
<li>在一张含有M条链表和N个键的散列表中，未命中查找和插入操作所需的比较次数为~N/M;</li>
</ul>
</li>
</ol>
<h3 id="3-4-2-基于线性探测法的散列表"><a href="#3-4-2-基于线性探测法的散列表" class="headerlink" title="3.4.2 基于线性探测法的散列表"></a>3.4.2 基于线性探测法的散列表</h3><ol>
<li>原理：用大小为M的数组保存N个键对。M&gt;N。利用数组中的空位解决碰撞。这种方法统称为 <strong><em>开放地址散列表</em></strong>。（思想：预期将内存用作链表，不如将它们作为在散列表的空元素）</li>
<li>当碰撞发生时，我们直接检查散列表中的下一个位置。有以下三种情况<ul>
<li>命中，该位置的键与被查找的键相同</li>
<li>未命中，该位置的键为空</li>
<li>继续查找，该位置的键与被查找的键不相同</li>
</ul>
</li>
<li>代码<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearProbingHashSt</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;<span class="comment">//键值对总数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M;<span class="comment">//数组大小</span></span><br><span class="line">    <span class="keyword">private</span> Key[] keys;</span><br><span class="line">    <span class="keyword">private</span> Value[] values;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearProbingHashSt</span><span class="params">()</span></span>&#123;</span><br><span class="line">        keys = <span class="keyword">new</span> (Key[]) Object[M];</span><br><span class="line">        values = <span class="keyword">new</span> (Value[]) Object[M];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (key.hashCode()&amp;<span class="number">0x7fffffff</span>)%M;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 确保有空位存放元素</span></span><br><span class="line">        <span class="keyword">if</span>(n&gt;M/<span class="number">2</span>)resize(<span class="number">2</span>*M);</span><br><span class="line">        <span class="comment">//假如key[hash] !=null 索引逐渐加1；</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = hash(key); keys[i]!=<span class="keyword">null</span> ; i = (i+<span class="number">1</span>)%M)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key[i].equals(key))&#123;</span><br><span class="line">                values[i] = value;<span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        keys[i] = key;</span><br><span class="line">        values[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = hash(key); keys[i]!=<span class="keyword">null</span> ; i = (i+<span class="number">1</span>)%M)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key[i].equals(key))&#123;</span><br><span class="line">               <span class="keyword">return</span> values[i] ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!contains(key))<span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> i = keys[hash(key)];</span><br><span class="line">        <span class="comment">//找到对应的key的索引</span></span><br><span class="line">        <span class="keyword">while</span>(!key.equals(keys[i])  )&#123;</span><br><span class="line">            i = (i+<span class="number">1</span>)%M;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//删除该索引的键值</span></span><br><span class="line">        keys[i] = <span class="keyword">null</span>;</span><br><span class="line">        values[i] = <span class="keyword">null</span>;</span><br><span class="line">        i = (i+<span class="number">1</span>)%M;</span><br><span class="line">        <span class="comment">//先删除再插入</span></span><br><span class="line">        <span class="keyword">while</span>(keys[i]!=<span class="keyword">null</span>)&#123; </span><br><span class="line">            Key keyToRedo = keys[i];</span><br><span class="line">            Value valueToRedo = values[i];</span><br><span class="line">            keys[i] =<span class="keyword">null</span>;</span><br><span class="line">            values[i] =<span class="keyword">null</span>;</span><br><span class="line">             N--;</span><br><span class="line">             put(keyToRedo,valueToRedo);</span><br><span class="line">              i = (i+<span class="number">1</span>)%M;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;<span class="number">0</span> &amp;&amp; N==M/<span class="number">8</span>)resize(M/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/06/algorithms-find/" itemprop="url">
                  《算法》读书笔记-查找
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-06T23:16:00+08:00" content="2016-12-06">
              2016-12-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/06/algorithms-find/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/06/algorithms-find/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&nbsp;&nbsp;查找</p>
<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><h2 id="3-1-符号表"><a href="#3-1-符号表" class="headerlink" title="3.1 符号表"></a>3.1 符号表</h2><p>&nbsp;&nbsp;</p>
<h3 id="3-1-1-API"><a href="#3-1-1-API" class="headerlink" title="3.1.1 API"></a>3.1.1 API</h3><h3 id="3-1-4-无序链表中的顺序查找"><a href="#3-1-4-无序链表中的顺序查找" class="headerlink" title="3.1.4 无序链表中的顺序查找"></a>3.1.4 无序链表中的顺序查找</h3><ol>
<li>代码：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SequentialSearchST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node first;</span><br><span class="line">        <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">            Key key;</span><br><span class="line">            Value value;</span><br><span class="line">            Node next;</span><br><span class="line">            Node(Key key,Value value,Node next)&#123;</span><br><span class="line">                <span class="keyword">this</span>.key = key;</span><br><span class="line">                <span class="keyword">this</span>.value = value;</span><br><span class="line">                <span class="keyword">this</span>.next = next;            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">            Node node =first;</span><br><span class="line">            <span class="keyword">while</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(node.key.equals(key))&#123;</span><br><span class="line">                    node.value = value;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">            first = <span class="keyword">new</span> Node(key,value,first);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">            Node node =first;</span><br><span class="line">            <span class="keyword">while</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(node.key.equals(key))&#123;</span><br><span class="line">                    <span class="keyword">return</span> node.value;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.性能：</p>
<blockquote>
<p>在含有N对键值的基于链表的符号表中，未命中的查找和插入操作都需要N次比较。命中的查找最坏情况下需要N次比较。特别地，向一个空表中插入N个不同的键需要~N^2次比较</p>
</blockquote>
<h3 id="3-1-5-有序数组中的二分查找"><a href="#3-1-5-有序数组中的二分查找" class="headerlink" title="3.1.5 有序数组中的二分查找"></a>3.1.5 有序数组中的二分查找</h3><ol>
<li><p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearchST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    Key[] keys;</span><br><span class="line">    Value[] values;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BinarySearchST</span><span class="params">(<span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">        keys = <span class="keyword">new</span> (Key[]) Comparable[capacity];</span><br><span class="line">        values = <span class="keyword">new</span> (Value[]) Comparable[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//小于等于key个数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> hi = keys.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> lo = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> middle;</span><br><span class="line">        <span class="keyword">while</span>(lo&lt;=hi)&#123;</span><br><span class="line">            middle = lo+(hi-lo)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> compare =key.compareTo(keys[middle]);</span><br><span class="line">            <span class="keyword">if</span>(compare&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                lo = middle +<span class="number">1</span>; </span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compare &lt;<span class="number">0</span>)&#123;</span><br><span class="line">                hi = middle -<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> middle;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rank = rank(key);</span><br><span class="line">        <span class="keyword">if</span>(keys[rank].key.compareTo(key) == <span class="number">0</span>)&#123;</span><br><span class="line">            keys[rank].value = value;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = N;i&gt;rank;i--)&#123;</span><br><span class="line">            keys[i] = keys[i-<span class="number">1</span>];</span><br><span class="line">            values[i] = values[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        keys[rank] = key;</span><br><span class="line">        values[rank] = value;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rank = rank(key);</span><br><span class="line">        <span class="keyword">if</span>(rank&lt; N &amp;&amp; keys[rank].compareTo(key)== <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> keys[rank].value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())&#123;</span><br><span class="line">          <span class="keyword">return</span> ;  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rank = rank(key);</span><br><span class="line">        <span class="keyword">if</span>(rank&lt; N &amp;&amp; keys[rank].compareTo(key)== <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = rank;i&lt;N-<span class="number">1</span>;i++)&#123;</span><br><span class="line">                keys[i] = keys[i+<span class="number">1</span>]; </span><br><span class="line">                values[i] = values[i+<span class="number">1</span>]; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">max</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys[N-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> key <span class="title">select</span><span class="params">(<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys[rank];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//大于等于key的最大键</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> key <span class="title">ceiling</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys[rank(key)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//小于等于key的最大键</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> key <span class="title">floor</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rank = rank(key);</span><br><span class="line">        <span class="keyword">if</span>(keys[rank].compareTo(key)== <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> keys[rank];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(rank == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> keys[rank - <span class="number">1</span>];    </span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>性能：</p>
</li>
</ol>
<blockquote>
<p>   在由N个键构成的有序数组中进行二分查找最多需要lgN+1次数比较（无论是否成功）</p>
<p>  在由N个键构成的有序数组中插入一个新的元素在最坏情况下需要访问~2N次数组，因此向一个空符号表中插入N个元素的最坏情况需要访问~N^2次数组</p>
</blockquote>
<h2 id="3-2-二叉查找树"><a href="#3-2-二叉查找树" class="headerlink" title="3.2 二叉查找树"></a>3.2 二叉查找树</h2><ol>
<li>定义：二叉查找树就是一个二叉树。其中每个借点都含有一个compareable的键且每个结点都含有一个左连接和右连接，且每个结点上的都大于左子树上任意结点的键，小于右子树上任意结点的键。</li>
<li>代码：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    Node root;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node left;</span><br><span class="line">        Node right;</span><br><span class="line">        <span class="keyword">int</span> N;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key, Value value,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.N = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//添加</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span></span>&#123;</span><br><span class="line">       root =  put(root,key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">put</span><span class="params">(Node node, Key key, Value value)</span></span>&#123;</span><br><span class="line">        <span class="comment">//如果结点为空 新建结点</span></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 键与结点的键比较</span></span><br><span class="line">        <span class="keyword">int</span> compareTo =key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo &gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//大于结点的键，则向右子树加入键</span></span><br><span class="line">            node.right = put(node.right,key,value);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span> )&#123;</span><br><span class="line">            <span class="comment">//小于结点的键，则向左子树加入键</span></span><br><span class="line">           node.left=  put(node.left,key,value);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//相等则替换结点的值</span></span><br><span class="line">            node.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//重新计数</span></span><br><span class="line">        node.N = size(node.left)+<span class="number">1</span>+size(node.right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node== <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.N;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> get(root,key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Value <span class="title">get</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 结点为null返回null</span></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 键与结点的键比较</span></span><br><span class="line">        <span class="keyword">int</span> compareTo =key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo &gt;<span class="number">0</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> get(node.right,key);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span> )&#123;</span><br><span class="line">           <span class="keyword">return</span>  get(node.left,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> min(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Key <span class="title">min</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.left !=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> min(node.left)</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> node.key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//小于等于key的最大key</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">floor</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> floor(node,key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Key <span class="title">floor</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 键与结点的键比较</span></span><br><span class="line">        <span class="keyword">int</span> compare = key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo &gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//找到右子树小于等于该键的键</span></span><br><span class="line">            Key rightMin = floor(node.right,key);</span><br><span class="line">            <span class="comment">//没有找到 自己为小于等于该键最大的键</span></span><br><span class="line">            <span class="keyword">if</span>(rightMin == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> node.key;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//有则返回该键</span></span><br><span class="line">                <span class="keyword">return</span> rightMin;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span> )&#123;</span><br><span class="line">            <span class="comment">//从左子树查找</span></span><br><span class="line">           <span class="keyword">return</span>  floor(node.left,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">select</span><span class="params">(<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> select(root,rank);</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Key <span class="title">select</span><span class="params">(Node node,<span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> size =size(node.left);</span><br><span class="line">        <span class="keyword">if</span>(size&lt; rank)&#123;</span><br><span class="line">            <span class="keyword">return</span> select(node.right,(rank-size-<span class="number">1</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(size&gt;rank)&#123;</span><br><span class="line">            <span class="keyword">return</span> select(node.left,rank);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rank(root,key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">int</span> compareTo =key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo&lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> rank(node.left,key));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> size(node.left)+<span class="number">1</span>+rank(node.right,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">      root =  deleteMin(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">deleteMin</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">           node.left =  deleteMin(node.left);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> node.right;</span><br><span class="line">        &#125;</span><br><span class="line">        node.N = size(node.left)+size(node.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">      root =  delete(root,key);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">delete</span><span class="params">(Node node,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> compareTo = key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(compareTo&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            node.right = delete(node.right,key);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compareTo &lt;<span class="number">0</span>)&#123;</span><br><span class="line">            node.left = delete(node.left,key);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 右树为空 新结点为左子树</span></span><br><span class="line">            <span class="keyword">if</span>(node.right==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> node.left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 左子树为空，新节点为右子树</span></span><br><span class="line">            <span class="keyword">if</span>(node.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> node.right;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">             Node minNode = min(node.right);</span><br><span class="line">            Node t= node;</span><br><span class="line">            node = minNode;</span><br><span class="line">            node.right = deleteMin(t.right);</span><br><span class="line">            node.left = t.left; </span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">        node.N = size(node.left)+size(node.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys(min(),max());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">(Key lo ,Key hi)</span></span>&#123;</span><br><span class="line">        Queue&lt;Key&gt; queue = <span class="keyword">new</span> Queue&lt;Key&gt;();</span><br><span class="line">         keys(root,queue,lo,hi);</span><br><span class="line">         <span class="keyword">return</span> queue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">keys</span><span class="params">(Node node,Queue&lt;Key&gt; queue,Key lo ,Key hi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)<span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">int</span> compareLo = lo.compareTo(node.key);</span><br><span class="line">        <span class="keyword">int</span> compareHi = hi.compareTo(node.key);</span><br><span class="line">        <span class="comment">//查左树</span></span><br><span class="line">        <span class="keyword">if</span>(compareLo&lt;<span class="number">0</span> )&#123;</span><br><span class="line">            keys(node.left,lo,hi);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//结点</span></span><br><span class="line">        <span class="keyword">if</span>(compareHi&gt;=<span class="number">0</span> || compareLo&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">             queue.enqueue(node.key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//查右树</span></span><br><span class="line">        <span class="keyword">if</span>(compareHi&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            keys(node.right,lo,hi);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>3.性能：</p>
<blockquote>
<p>在由N个随机键构成的二叉查找树中，查找命中平均所需的比较次数为~2lnN(约1.39lgN)</p>
<p>在由N个随机键构成的二叉查找树中插入和查找命中未命中的元素平均所需的比较次数为~2lnN(约1.39lgN)</p>
</blockquote>
<h2 id="3-3-平衡查找树"><a href="#3-3-平衡查找树" class="headerlink" title="3.3 平衡查找树"></a>3.3 平衡查找树</h2><h3 id="3-3-1-2-3查找树"><a href="#3-3-1-2-3查找树" class="headerlink" title="3.3.1 2-3查找树"></a>3.3.1 2-3查找树</h3><ol>
<li>定义：一棵2-3查找树或为一棵空疏，或由以下结点组成：<ul>
<li>2-结点：含有一个键（及其对应的值）和两条链接，左链接指向的2-3树中的键都小于该结点，右链接指向2-3树中的键都大于该结点。</li>
<li>3-结点：含有两个键（及其对应的值）和三条链接，左链接指向的2-3树中的键都小于该结点，中链接指向2-3树中的键都位于该结点的两个键之间，右链接指向2-3树中的键都大于该结点。</li>
</ul>
</li>
<li>原理：<ul>
<li>向2-结点插入新结点:只要变成3-结点即可</li>
<li>向一棵只含有一个3-结点的树中插入新键：<ul>
<li>变成4-结点，然后中键上移变成由3个2-结点组成的2-3树</li>
</ul>
</li>
<li>向一个父节点为2-结点的3-结点中插入新键<ul>
<li>变成4-结点，然后中键上移父节点变成3-结点</li>
</ul>
</li>
<li>向一个父节点为3-结点的3-结点中插入新键<ul>
<li>变成4-结点，然后中键上移父节点变成4-结点，父节点再逐级向上分解。</li>
</ul>
</li>
</ul>
</li>
<li>性能：</li>
</ol>
<blockquote>
<p>  在一棵大小为N的2-3树中，查找和插入操作访问的结点必然不超过lgN个</p>
</blockquote>
<h3 id="3-3-2-红黑树"><a href="#3-3-2-红黑树" class="headerlink" title="3.3.2 红黑树"></a>3.3.2 红黑树</h3><ol>
<li><p>定义：将树的类型分为两种：红链接将两个2-结点连接起来构成3-结点，黑链接则是2-3树种的普通链接。<br>另外一种定义：</p>
<ul>
<li>红链接都为左链接</li>
<li>没有任意一个结点与两条红链接相连</li>
<li>该树是完美黑色平衡的，即任意空链接到根结点的路径上的黑链接数量相同。</li>
</ul>
</li>
<li><p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line">    <span class="keyword">boolean</span> color;</span><br><span class="line">    Key key;</span><br><span class="line">    Value value;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key,Value value,<span class="keyword">boolean</span> color,<span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">        <span class="keyword">this</span>.N = N;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//左旋转</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">rotateLeft</span><span class="params">(Node h)</span></span>&#123;</span><br><span class="line">    Node x = h.right;</span><br><span class="line">    h.right = x.left;</span><br><span class="line">    x.left = h;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    x.N = h.N;</span><br><span class="line">    h.N = size(h.left)+<span class="number">1</span>+size(h.right);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//右旋转</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">rotateRight</span><span class="params">(Node h)</span></span>&#123;</span><br><span class="line">    Node x = h.left;</span><br><span class="line">    x.right = h;</span><br><span class="line">    h.left = h.right;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    x.N = h.N;</span><br><span class="line">    h.N = size(h.left)+<span class="number">1</span>+size(h.right);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//颜色转换</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flipColor</span><span class="params">(Node h)</span></span>&#123;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    h.left.color = BLACK;</span><br><span class="line">    h.right.color = BLACK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedBlackBST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">   Node root;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        root = put(root,key,value);</span><br><span class="line">        root.color =BLACK;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node.color;</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node node,Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Node(key,value,RED,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//跟二叉查找树一样</span></span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">           node.right =  put(node.right,key,value);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cmp&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                node.left =  put(node.left,key,value);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                  node.value = value;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//右子结点为红链接且左子结点是黑链接-》左旋</span></span><br><span class="line">        <span class="keyword">if</span>(isRed(node.right) &amp;&amp; !isRed(node.left))&#123;</span><br><span class="line">           <span class="keyword">return</span>  rotateLeft(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//左子结点为红链接且左子结点的左子结点是红链接-》右旋</span></span><br><span class="line">        <span class="keyword">if</span>(isRed(node.left) &amp;&amp; isRed(node.left.left))&#123;</span><br><span class="line">           <span class="keyword">return</span> rotateRight(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//左子结点为红链接且右子结点是红链接-》颜色转换</span></span><br><span class="line">        <span class="keyword">if</span>(isRed(node.left &amp;&amp; isRed(node.right)))&#123;</span><br><span class="line">            flipColor(node);</span><br><span class="line">        &#125;</span><br><span class="line">        node.N = size(node.left)+<span class="number">1</span>size(node.right);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.性能：</p>
<blockquote>
<p>一棵大小为N的红黑树的高度不会超过2lgN</p>
<p>一棵大小为N的红黑树中，根结点到任意结点的平均路径长度为~1.00lgN。</p>
</blockquote>
<h2 id="3-4-散列表"><a href="#3-4-散列表" class="headerlink" title="3.4 散列表"></a>3.4 散列表</h2><ol>
<li>原理：<ul>
<li>第一步用 <strong><em>散列函数</em></strong>将被查找的键转化为数组的一个索引</li>
<li>第二步处理碰撞冲突（用散列函数生成的索引冲突）<ul>
<li>解决的方法：<strong><em>拉链法</em></strong>   和  <strong><em>碰撞法</em></strong></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="3-4-1-散列函数"><a href="#3-4-1-散列函数" class="headerlink" title="3.4.1 散列函数"></a>3.4.1 散列函数</h3><ol>
<li>对于每一种类型的键都需要一个与之对应的散列函数。</li>
<li><p>方法：</p>
<ul>
<li>整型：除留余数法 选择一个素数M；然后键的索引=<code>k%M</code></li>
<li>浮点数：将键编程二进制数然后再使用除留余数法</li>
<li><p>字符串：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s.length();i++)&#123;</span><br><span class="line">   hash = (R * hash + s.charAt(i)) % M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将hashCode()的返回值转化为一个数组索引</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x.hashCode() &amp;&amp; <span class="number">0x7fffffff</span>)%M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="3-4-2-基于拉链法的散列表"><a href="#3-4-2-基于拉链法的散列表" class="headerlink" title="3.4.2 基于拉链法的散列表"></a>3.4.2 基于拉链法的散列表</h3><ol>
<li>原理：选择足够大的M，使得所有链表都尽可能短以保证高效的查找。</li>
<li>查找：先根据散列值找到链表。然后沿着链表顺序查找相应的键。</li>
<li><p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeparteChainingHashST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;<span class="comment">//键值对的总数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M;<span class="comment">//散列表的大小</span></span><br><span class="line">    <span class="keyword">private</span> SquenticalSearchST&lt;Key,Value&gt;[] st;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SeparteChainingHashST</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">997</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SeparteChainingHashST</span><span class="params">(<span class="keyword">int</span> M)</span></span>&#123;</span><br><span class="line">        SquenticalSearchST&lt;Key,Value&gt;[] st = <span class="keyword">new</span> (SquenticalSearchST&lt;Key,Value&gt;)SquenticalSearchST[M];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i&lt;M; i++)&#123;</span><br><span class="line">            st[i] = <span class="keyword">new</span> SquenticalSearchST();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span>  <span class="title">hash</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (key.hashCode() &amp; <span class="number">0x7fffffff</span>)%M;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        st[hash(key)].put(key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Value)st[hash(key)].get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>性质：</p>
<ul>
<li>在一张含有M条链表和N个键的散列表中，任意一条链表中的键的数量均在N/M的常数因子内的概率无限接近于1.</li>
<li>在一张含有M条链表和N个键的散列表中，未命中查找和插入操作所需的比较次数为~N/M;</li>
</ul>
</li>
</ol>
<h3 id="3-4-2-基于线性探测法的散列表"><a href="#3-4-2-基于线性探测法的散列表" class="headerlink" title="3.4.2 基于线性探测法的散列表"></a>3.4.2 基于线性探测法的散列表</h3><ol>
<li>原理：用大小为M的数组保存N个键对。M&gt;N。利用数组中的空位解决碰撞。这种方法统称为 <strong><em>开放地址散列表</em></strong>。（思想：预期将内存用作链表，不如将它们作为在散列表的空元素）</li>
<li>当碰撞发生时，我们直接检查散列表中的下一个位置。有以下三种情况<ul>
<li>命中，该位置的键与被查找的键相同</li>
<li>未命中，该位置的键为空</li>
<li>继续查找，该位置的键与被查找的键不相同</li>
</ul>
</li>
<li>代码<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearProbingHashSt</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;<span class="comment">//键值对总数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M;<span class="comment">//数组大小</span></span><br><span class="line">    <span class="keyword">private</span> Key[] keys;</span><br><span class="line">    <span class="keyword">private</span> Value[] values;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearProbingHashSt</span><span class="params">()</span></span>&#123;</span><br><span class="line">        keys = <span class="keyword">new</span> (Key[]) Object[M];</span><br><span class="line">        values = <span class="keyword">new</span> (Value[]) Object[M];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (key.hashCode()&amp;<span class="number">0x7fffffff</span>)%M;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 确保有空位存放元素</span></span><br><span class="line">        <span class="keyword">if</span>(n&gt;M/<span class="number">2</span>)resize(<span class="number">2</span>*M);</span><br><span class="line">        <span class="comment">//假如key[hash] !=null 索引逐渐加1；</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = hash(key); keys[i]!=<span class="keyword">null</span> ; i = (i+<span class="number">1</span>)%M)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key[i].equals(key))&#123;</span><br><span class="line">                values[i] = value;<span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        keys[i] = key;</span><br><span class="line">        values[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = hash(key); keys[i]!=<span class="keyword">null</span> ; i = (i+<span class="number">1</span>)%M)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key[i].equals(key))&#123;</span><br><span class="line">               <span class="keyword">return</span> values[i] ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!contains(key))<span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> i = keys[hash(key)];</span><br><span class="line">        <span class="comment">//找到对应的key的索引</span></span><br><span class="line">        <span class="keyword">while</span>(!key.equals(keys[i])  )&#123;</span><br><span class="line">            i = (i+<span class="number">1</span>)%M;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//删除该索引的键值</span></span><br><span class="line">        keys[i] = <span class="keyword">null</span>;</span><br><span class="line">        values[i] = <span class="keyword">null</span>;</span><br><span class="line">        i = (i+<span class="number">1</span>)%M;</span><br><span class="line">        <span class="comment">//先删除再插入</span></span><br><span class="line">        <span class="keyword">while</span>(keys[i]!=<span class="keyword">null</span>)&#123; </span><br><span class="line">            Key keyToRedo = keys[i];</span><br><span class="line">            Value valueToRedo = values[i];</span><br><span class="line">            keys[i] =<span class="keyword">null</span>;</span><br><span class="line">            values[i] =<span class="keyword">null</span>;</span><br><span class="line">             N--;</span><br><span class="line">             put(keyToRedo,valueToRedo);</span><br><span class="line">              i = (i+<span class="number">1</span>)%M;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;<span class="number">0</span> &amp;&amp; N==M/<span class="number">8</span>)resize(M/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="各个查找方法对比"><a href="#各个查找方法对比" class="headerlink" title="各个查找方法对比"></a>各个查找方法对比</h3><p><a href="http://oa5ova13h.bkt.clouddn.com/%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95.PNG" target="_blank" rel="external">对比图</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/24/linux-vbird-chapter-10/" itemprop="url">
                  《鸟哥的私房菜》读书笔记-第十章、vim 程序编辑器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-24T08:26:13+08:00" content="2016-11-24">
              2016-11-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/24/linux-vbird-chapter-10/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/24/linux-vbird-chapter-10/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-vi-与-vim"><a href="#1-vi-与-vim" class="headerlink" title="1. vi 与 vim"></a>1. vi 与 vim</h4><h5 id="1-1-为何要学-vim"><a href="#1-1-为何要学-vim" class="headerlink" title="1.1 为何要学 vim"></a>1.1 为何要学 vim</h5><pre><code>*  所有的 Unix Like 系统都会内建 vi 文书编辑器，其他的文书编辑器则不一定会存在；
* 很多个别软件的编辑接口都会 ***主动呼叫 vi*** (例如未来会谈到的 crontab, visudo, edquota 等指令)；
* vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便程序设计；
</code></pre><p>因为程序简单，编辑速度相当快速。</p>
<h4 id="2-vi-的使用"><a href="#2-vi-的使用" class="headerlink" title="2. vi 的使用"></a>2. vi 的使用</h4><h5 id="2-1-简易执行范例"><a href="#2-1-简易执行范例" class="headerlink" title="2.1 简易执行范例"></a>2.1 简易执行范例</h5><pre><code>2.2.1 vi [filename]
2.2.2 模式：编辑模式和命令模式之间不能切换
    一般模式：按[i,o,a]切换到编辑模式，按Esc退出
    编辑模式：
    命令模式：
</code></pre><h5 id="2-2-按键说明"><a href="#2-2-按键说明" class="headerlink" title="2.2 按键说明"></a>2.2 按键说明</h5><h6 id="2-2-1-一般模式可用的按钮说明，光标移动、复制贴上、搜寻取代等"><a href="#2-2-1-一般模式可用的按钮说明，光标移动、复制贴上、搜寻取代等" class="headerlink" title="2.2.1 一般模式可用的按钮说明，光标移动、复制贴上、搜寻取代等"></a>2.2.1 一般模式可用的按钮说明，光标移动、复制贴上、搜寻取代等</h6><pre><code>2.2.1.1 移动光标的方法：
    `crtl+f`:下一页[Page Down]
    `crtl+b`：上一页[Page Up]
    `0`：移动到这一行的最前面字符处 [Home]
    `$`：移动到这一行的最后面字符处 [End]
    `gg`：第一行
    `G`：最后一行
    `n&lt;space&gt;`:那个 n 表示『数字』，例如 20 。按下数字后再按空格键，光标会向右移动这一行的 n 个字符。例如 20space 则光标会向后面移动 20 个字符距离。
    `n&lt;Enter&gt;`:n 为数字。光标向下移动 n 行(
    `nG`：到第几行
2.2.1.2 寻找替换：
    `/word`：向下查找word
    `:n1,$n2s/word1/word2/g`： 从n1行到n2行把word1替换成word2
    `:n1,$s/word1/word2/g`： 从第n2行开始到最后一行把word1替换成word2
    `:n1,$s/word1/word2/gc`：    从第n2行开始到最后一行把word1替换成word2,需要confirm确定
2.2.1.3 删除、复制与贴上：
    `x`和`X`：`x`为删除光标后的一个字符，即向后删[delete],`X` 为删除光标前的一个字符,即向前删[backspace]
    `xn`：连续删除n个字符
    `dd`：删除该行
    `ndd`:n 为数字。删除光标所在的向下 n 列（包括该行），例如 20dd     则是删除 20 列 
    `yy`：复制该行
    `nyy`：n为数字，复制光标所在的向下 n 列（包括该行），例如 20yy  则是复制 20 列
    `p`和`P`：p 为将已复制的数据在光标下一行贴上，P    则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了    10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20  行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20    行会被推到变成 30 行。
    `crtl +r`:重做上一个动作
    `u`：撤销
    `.`：重做上一个动作
</code></pre><h6 id="2-2-2-一般模式切换到编辑模式的可用的按钮说明"><a href="#2-2-2-一般模式切换到编辑模式的可用的按钮说明" class="headerlink" title="2.2.2 一般模式切换到编辑模式的可用的按钮说明"></a>2.2.2 一般模式切换到编辑模式的可用的按钮说明</h6><pre><code>2.2.2.1 进入插入或取代的编辑模式：
`i, I`：进入插入模式(Insert mode)：
</code></pre><p>i 为『从目前光标所在处插入』， I 为『在目前所在行的第一个非空格符处开始插入』<br>            <code>a, A</code>：进入插入模式(Insert mode)：<br>a 为『从目前光标所在的下一个字符处开始插入』， A 为『从光标所在行的最后一个字符处开始插入』<br>            <code>o, O</code>：进入插入模式(Insert mode)：<br>这是英文字母 o 的大小写。o 为『在目前光标所在的下一行处插入新的一行』； O 为在目前光标所在处的上一行插入新的一行！<br>            <code>r, R</code>：进入取代模式(Replace mode)：<br>r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 ESC 为止；</p>
<h6 id="2-2-3-一般模式切换到指令列模式的可用的按钮说明"><a href="#2-2-3-一般模式切换到指令列模式的可用的按钮说明" class="headerlink" title="2.2.3 一般模式切换到指令列模式的可用的按钮说明"></a>2.2.3 一般模式切换到指令列模式的可用的按钮说明</h6><pre><code>2.2.3.1 指令列的储存、离开等指令
    `:w`：将编辑的数据写入硬盘档案中
    `:q`：离开
    `:wq`：储存后离开，若为 :wq! 则为强制储存后离开
2.2.3.2 vim 环境的变更
    `:set nu` ：显示行号
    `:set nonu`:不显示行号
</code></pre><h5 id="2-3-一个案例的练习"><a href="#2-3-一个案例的练习" class="headerlink" title="2.3 一个案例的练习"></a>2.3 一个案例的练习</h5><h5 id="2-4-vim-的暂存档、救援回复与开启时的警告讯息"><a href="#2-4-vim-的暂存档、救援回复与开启时的警告讯息" class="headerlink" title="2.4 vim 的暂存档、救援回复与开启时的警告讯息"></a>2.4 vim 的暂存档、救援回复与开启时的警告讯息</h5><h4 id="3-vim-的额外功能"><a href="#3-vim-的额外功能" class="headerlink" title="3. vim 的额外功能"></a>3. vim 的额外功能</h4><h5 id="3-1-区块选择-Visual-Block"><a href="#3-1-区块选择-Visual-Block" class="headerlink" title="3.1 区块选择(Visual Block)"></a>3.1 区块选择(Visual Block)</h5><pre><code>    `v`：字符选择，会将光标经过的地方反白选择！
    `V`：行选择，会将光标经过的行反白选择！
`[Ctrl]+v`：区块选择，可以用长方形的方式选择资料
    `y`：将反白的地方复制起来
</code></pre><p>d   将反白的地方删除掉</p>
<h5 id="3-2-多档案编辑"><a href="#3-2-多档案编辑" class="headerlink" title="3.2 多档案编辑"></a>3.2 多档案编辑</h5><pre><code>`vim filename1 filename2`
:n  编辑下一个档案
:N  编辑上一个档案
:files  列出目前这个 vim 的开启的所有档案
</code></pre><h5 id="3-3-多窗口功能"><a href="#3-3-多窗口功能" class="headerlink" title="3.3 多窗口功能"></a>3.3 多窗口功能</h5><pre><code>`:sp [filename]`  开启一个新窗口，如果有加 filename， 表示在新窗口开启一个新档案，否则表示两个窗口为同一个档案内容(同步显示)。
`[ctrl]+w+ j`和`[ctrl]+w+↓`  按键的按法是：先按下 [ctrl] 不放， 再按下 w 后放开所有的按键，然后再按下 j (或向下箭头键)，则光标可移动到下方的窗口。
`[ctrl]+w+ k` 和`[ctrl]+w+↑`同上，不过光标移动到上面的窗口。
`[ctrl]+w+ q` 其实就是 :q 结束离开啦！ 举例来说，如果我想要结束下方的窗口，那么利用 [ctrl]+w+↓ 移动到下方窗口后，按下 :q 即可离开， 也可以按下 [ctrl]+w+q 啊！
</code></pre><h5 id="3-4-vim-环境设定与记录：-vimrc-viminfo"><a href="#3-4-vim-环境设定与记录：-vimrc-viminfo" class="headerlink" title="3.4 vim 环境设定与记录： ~/.vimrc, ~/.viminfo"></a>3.4 vim 环境设定与记录： ~/.vimrc, ~/.viminfo</h5><h5 id="3-5-vim-常用指令示意图"><a href="#3-5-vim-常用指令示意图" class="headerlink" title="3.5 vim 常用指令示意图"></a>3.5 vim 常用指令示意图</h5><h4 id="4-其他-vim-使用注意事项"><a href="#4-其他-vim-使用注意事项" class="headerlink" title="4. 其他 vim 使用注意事项"></a>4. 其他 vim 使用注意事项</h4><h5 id="4-1-中文编码的问题"><a href="#4-1-中文编码的问题" class="headerlink" title="4.1 中文编码的问题"></a>4.1 中文编码的问题</h5><pre><code>LANG= xxx
</code></pre><h5 id="4-2-DOS-与-Linux-的断行字符：-dos2unix-unix2dos"><a href="#4-2-DOS-与-Linux-的断行字符：-dos2unix-unix2dos" class="headerlink" title="4.2 DOS 与 Linux 的断行字符： dos2unix, unix2dos"></a>4.2 DOS 与 Linux 的断行字符： dos2unix, unix2dos</h5><pre><code>而 Linux 的 Enter 为 LF 符号， 不过，由于 DOS 的断行符号是 CRLF ，也就是多了一个 ^M 的符号出来
</code></pre><h5 id="4-3-语系编码转换：-iconv"><a href="#4-3-语系编码转换：-iconv" class="headerlink" title="4.3 语系编码转换： iconv"></a>4.3 语系编码转换： iconv</h5>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/24/linux-vbird-chapter-7/" itemprop="url">
                  《鸟哥的私房菜》读书笔记-第七章、Linux 文件与目录管理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-24T08:26:13+08:00" content="2016-11-24">
              2016-11-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/24/linux-vbird-chapter-7/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/24/linux-vbird-chapter-7/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-目录与路径"><a href="#1-目录与路径" class="headerlink" title="1. 目录与路径"></a>1. 目录与路径</h4><h5 id="1-1-相对路径与绝对路径"><a href="#1-1-相对路径与绝对路径" class="headerlink" title="1.1 相对路径与绝对路径"></a>1.1 相对路径与绝对路径</h5><pre><code>相对路径：./
绝对路径: /xx/xx
</code></pre><h5 id="1-2-目录的相关操作：-cd-pwd-mkdir-rmdir"><a href="#1-2-目录的相关操作：-cd-pwd-mkdir-rmdir" class="headerlink" title="1.2 目录的相关操作： cd, pwd, mkdir, rmdir"></a>1.2 目录的相关操作： cd, pwd, mkdir, rmdir</h5><pre><code>cd: change directory
    cd ~ 
    cd ~[username]
    cd - 上个视图的目录
    cd .. 当前目录的父目录
pwd：print working directory
    pwd -P ：显示真正的目录，非连接文件夹的名称
mkdir: make directory
    mkdir -p test1/test2/test3 ：创建test3，当其父目录不存在的时候一并创建
rmdir: remove directory 删除空文件夹
    rmdir xxx 只能删除空文件夹
    rmdir -r xxx 递归删除文件夹里面所有的东西
</code></pre><h5 id="1-3-关於运行档路径的变量：-PATH"><a href="#1-3-关於运行档路径的变量：-PATH" class="headerlink" title="1.3 关於运行档路径的变量： $PATH"></a>1.3 关於运行档路径的变量： $PATH</h5><pre><code>echo $PATH 执行文件所在的文件路径，即环境变量
</code></pre><h4 id="2-文件与目录管理"><a href="#2-文件与目录管理" class="headerlink" title="2. 文件与目录管理"></a>2. 文件与目录管理</h4><h5 id="2-1-文件与目录的检视：-ls"><a href="#2-1-文件与目录的检视：-ls" class="headerlink" title="2.1 文件与目录的检视： ls"></a>2.1 文件与目录的检视： ls</h5><pre><code>ls -l：当前目录的属性和权限
ls -a：显示隐藏文件
ls -d：只显示目录
</code></pre><h5 id="2-2-复制、删除与移动：-cp-rm-mv"><a href="#2-2-复制、删除与移动：-cp-rm-mv" class="headerlink" title="2.2 复制、删除与移动： cp, rm, mv"></a>2.2 复制、删除与移动： cp, rm, mv</h5><pre><code>cp:
    cp -a xxx：相当於 -pdr 的意思
    cp -i xxx：询问，假如目标文件存在
    cp -p xxx:连同文件属性一并复制过去
    cp -r xxx:递归复制，如复制文件夹
rm:
    rm -r xxx：因为该目录或文件『肯定』会被 root 杀掉！
mv: 移动更名
    mv xxx xxx
</code></pre><h5 id="2-3-取得路径的文件名称与目录名称"><a href="#2-3-取得路径的文件名称与目录名称" class="headerlink" title="2.3 取得路径的文件名称与目录名称"></a>2.3 取得路径的文件名称与目录名称</h5><h4 id="3-文件内容查阅："><a href="#3-文件内容查阅：" class="headerlink" title="3. 文件内容查阅："></a>3. 文件内容查阅：</h4><h5 id="3-1-直接检视文件内容：-cat-tac-nl"><a href="#3-1-直接检视文件内容：-cat-tac-nl" class="headerlink" title="3.1 直接检视文件内容： cat, tac, nl"></a>3.1 直接检视文件内容： cat, tac, nl</h5><h5 id="3-2-可翻页检视：-more-less"><a href="#3-2-可翻页检视：-more-less" class="headerlink" title="3.2 可翻页检视： more, less"></a>3.2 可翻页检视： more, less</h5><h5 id="3-3-数据撷取：-head-tail"><a href="#3-3-数据撷取：-head-tail" class="headerlink" title="3.3 数据撷取： head, tail"></a>3.3 数据撷取： head, tail</h5><h5 id="3-4-非纯文字档：-od"><a href="#3-4-非纯文字档：-od" class="headerlink" title="3.4 非纯文字档： od"></a>3.4 非纯文字档： od</h5><h5 id="3-5-修改文件时间与建置新档：-touch"><a href="#3-5-修改文件时间与建置新档：-touch" class="headerlink" title="3.5 修改文件时间与建置新档： touch"></a>3.5 修改文件时间与建置新档： touch</h5><h4 id="4-文件与目录的默认权限与隐藏权限"><a href="#4-文件与目录的默认权限与隐藏权限" class="headerlink" title="4. 文件与目录的默认权限与隐藏权限"></a>4. 文件与目录的默认权限与隐藏权限</h4><h5 id="4-1-文件默认权限：umask"><a href="#4-1-文件默认权限：umask" class="headerlink" title="4.1 文件默认权限：umask"></a>4.1 文件默认权限：umask</h5><h5 id="4-2-文件隐藏属性：-chattr-lsattr"><a href="#4-2-文件隐藏属性：-chattr-lsattr" class="headerlink" title="4.2 文件隐藏属性： chattr, lsattr"></a>4.2 文件隐藏属性： chattr, lsattr</h5><h5 id="4-4-文件特殊权限：SUID-SGID-SBIT-权限配置"><a href="#4-4-文件特殊权限：SUID-SGID-SBIT-权限配置" class="headerlink" title="4.4 文件特殊权限：SUID, SGID, SBIT, 权限配置"></a>4.4 文件特殊权限：SUID, SGID, SBIT, 权限配置</h5><pre><code>SUID： Set UID 替代x，就是说有了s后在运行该程序的时候具有该程序拥有者的权限，就能够通过该程序修改属于改程序拥有者的文件
    SUID 权限仅对二进位程序(binary program)有效；
    运行者对於该程序需要具有 x 的可运行权限；
    本权限仅在运行该程序的过程中有效 (run-time)；
    运行者将具有该程序拥有者 (owner) 的权限。
SGID：与SUID类似只是把运行时拥有该程序所在群组的权限
    对于文件：
        SGID 对二进位程序有用还有目录！！！
        程序运行者对於该程序来说，需具备 x 的权限；
        运行者在运行的过程中将会获得该程序群组的支持
    对于目录：
        使用者若对於此目录具有 r 与 x 的权限时，该使用者能够进入此目录；
        使用者在此目录下的有效群组(effective group)将会变成该目录的群组；
        用途：若使用者在此目录下具有 w 的权限(可以新建文件)                ，则使用者所创建的新文件，该新文件的群组与此目录的群组 ***相同***。
SBIT：Sticky Bit
    当使用者对於此目录具有 w, x 权限，亦即具有写入的权限时；
    当使用者在该目录下创建文件或目录时，***仅有***自己与 root 才有权力删除该文件
权限配置
     4 为 SUID
    2 为 SGID
    1 为 SBIT
</code></pre><h5 id="4-3-观察文件类型：file"><a href="#4-3-观察文件类型：file" class="headerlink" title="4.3 观察文件类型：file"></a>4.3 观察文件类型：file</h5><pre><code>file xxx
</code></pre><h4 id="5-命令与文件的搜寻："><a href="#5-命令与文件的搜寻：" class="headerlink" title="5. 命令与文件的搜寻："></a>5. 命令与文件的搜寻：</h4><h5 id="5-1-命令档名的搜寻：which"><a href="#5-1-命令档名的搜寻：which" class="headerlink" title="5.1 命令档名的搜寻：which"></a>5.1 命令档名的搜寻：which</h5><pre><code>which xxx
</code></pre><h5 id="5-2-文件档名的搜寻：whereis-locate-find"><a href="#5-2-文件档名的搜寻：whereis-locate-find" class="headerlink" title="5.2 文件档名的搜寻：whereis, locate, find"></a>5.2 文件档名的搜寻：whereis, locate, find</h5><pre><code>1. whereis
2. locate
3. find
    find path -user name
    find path -group name
    find path -perm mode 权限刚好
    find path -perm -mode 必须要全部囊括 mode 的权限的文件
    find path -perm +mode 
        搜寻文件权限『包含任一 mode 的权限』的文件，举例来说，我们搜寻
         -rwxr-xr-x ，亦即 -perm +755 时，但一个文件属性为 -rw-------也会被列出来，因为他有 -rw.... 的属性存在！
    find / -perm +7000 -exec ls -l {} \;
        {} 代表的是『由 find 找到的内容』，如上图所示，find 的结果会被放置到 {} 位置中；-exec 一直到 \; 是关键字，代表 find 额外动作的开始 (-exec) 到结束 (\;) ，在这中间的就是 find 命令内的额外动作。 在本例中就是『 ls -l {} 』罗！因为『 ; 』在 bash 环境下是有特殊意义的，因此利用反斜线来跳脱。
</code></pre><h4 id="6-极重要！权限与命令间的关系："><a href="#6-极重要！权限与命令间的关系：" class="headerlink" title="6. 极重要！权限与命令间的关系："></a>6. 极重要！权限与命令间的关系：</h4><pre><code>一、让使用者能进入某目录成为『可工作目录』的基本权限为何：
    可使用的命令：例如 cd 等变换工作目录的命令；
    目录所需权限：使用者对这个目录至少需要具有 x 的权限
    额外需求：如果使用者想要在这个目录内利用 ls 查阅档名，则使用者对此目录还需要 r 的权限。
二、使用者在某个目录内读取一个文件的基本权限为何？
    可使用的命令：例如本章谈到的 cat, more, less等等
    目录所需权限：使用者对这个目录至少需要具有 x 权限；
    文件所需权限：使用者对文件至少需要具有 r 的权限才行！
三、让使用者可以修改一个文件的基本权限为何？
    可使用的命令：例如 nano 或未来要介绍的 vi 编辑器等；
    目录所需权限：使用者在该文件所在的目录至少要有 x 权限；
    文件所需权限：使用者对该文件至少要有 r, w 权限
四、让一个使用者可以创建一个文件的基本权限为何？
    目录所需权限：使用者在该目录要具有 w,x 的权限，重点在 w 啦！
五、让使用者进入某目录并运行该目录下的某个命令之基本权限为何？
    目录所需权限：使用者在该目录至少要有 x 的权限；
    文件所需权限：使用者在该文件至少需要有 x 的权限
</code></pre><p>-a 是and 的意思<br>-o 是or的意思<br>! 条件  是非的意思<br>find / ! -user root 查找非root的文件</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/24/linux-vbird-chapter-6/" itemprop="url">
                  《鸟哥的私房菜》读书笔记-第六章、Linux 的文件权限与目录配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-24T00:17:13+08:00" content="2016-11-24">
              2016-11-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/24/linux-vbird-chapter-6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/24/linux-vbird-chapter-6/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-使用者与群组"><a href="#1-使用者与群组" class="headerlink" title="1. 使用者与群组"></a>1. 使用者与群组</h4><pre><code>1. user，group 和others
</code></pre><h4 id="2-Linux文件权限概念"><a href="#2-Linux文件权限概念" class="headerlink" title="2. Linux文件权限概念"></a>2. Linux文件权限概念</h4><h5 id="2-1-Linux文件属性"><a href="#2-1-Linux文件属性" class="headerlink" title="2.1 Linux文件属性"></a>2.1 Linux文件属性</h5><pre><code>-rwrwx---
d 为目录
- 为文件
l 连结档(link file
b 则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
c 则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。
三个rwx，分别为文件拥有者的权限，同群组的权限，其他非本群组的权限
</code></pre><p>第二组为『同群组的权限』；<br>第三组为『其他非本群组的权限』。</p>
<h5 id="2-2-如何改变文件属性与权限：-chgrp-chown-chmod"><a href="#2-2-如何改变文件属性与权限：-chgrp-chown-chmod" class="headerlink" title="2.2 如何改变文件属性与权限： chgrp, chown, chmod"></a>2.2 如何改变文件属性与权限： chgrp, chown, chmod</h5><pre><code>chgrp: `chgrp 群组 文件` 
chown：`chown 用户 文件`
chmod：`chmod 文件权限 文件名` `chmod 644 test.txt`
chmod   u g o       a +(加入)  -(除去)      =(设定)
        r
        w
        x   文件或目录
        如`chmod  u=rwx,go=rx  .bashrc`、`chmod  a+w  .bashrc`、`chmod  a-x  .bashrc`
</code></pre><h5 id="2-3-目录与文件之权限意义"><a href="#2-3-目录与文件之权限意义" class="headerlink" title="2.3 目录与文件之权限意义"></a>2.3 目录与文件之权限意义</h5><pre><code>对文件：
    r:读取文件内容
    w:修改，编辑，新增但***不包含删除该文件***
    x：跟window根据扩展名判断文件是否执行不同,Linux系统是根据x这个权限来决定文件是否可以被执行
对目录：
    r:具有读取目录结构列表的权限。即可以使用`ls`,但是只看到文件名，要看到文件详细需要`x`,不然只会有问号
    w:建立新文件和新文件夹，删除已存在的文件和文件夹（*无论其权限如何*）,修改文件夹和文件名，移动目录内文件和文件夹的位置。
    要判断用户是否有权限删除一个文件，就 *判断用户对该文件所处的父目录是否有w权限*
    x:用户能否进入该目录成为工作目录
    假如要开放目录给其他人：应该至少也要给予r及x的权限，但w权限不可随便给.
</code></pre><h5 id="2-4-Linux文件种类与扩展名"><a href="#2-4-Linux文件种类与扩展名" class="headerlink" title="2.4 Linux文件种类与扩展名"></a>2.4 Linux文件种类与扩展名</h5><h4 id="3-Linux目录配置"><a href="#3-Linux目录配置" class="headerlink" title="3. Linux目录配置"></a>3. Linux目录配置</h4><h5 id="3-1-Linux目录配置的依据–FHS：-usr-var"><a href="#3-1-Linux目录配置的依据–FHS：-usr-var" class="headerlink" title="3.1 Linux目录配置的依据–FHS：/, /usr, /var"></a>3.1 Linux目录配置的依据–FHS：/, /usr, /var</h5><h5 id="3-2-目录树-directory-tree"><a href="#3-2-目录树-directory-tree" class="headerlink" title="3.2 目录树(directory tree)"></a>3.2 目录树(directory tree)</h5><h5 id="3-3-绝对路径与相对路径"><a href="#3-3-绝对路径与相对路径" class="headerlink" title="3.3 绝对路径与相对路径"></a>3.3 绝对路径与相对路径</h5><h5 id="3-4-CentOS-的观察：-lsb-release"><a href="#3-4-CentOS-的观察：-lsb-release" class="headerlink" title="3.4 CentOS 的观察： lsb_release"></a>3.4 CentOS 的观察： lsb_release</h5>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/24/linux-vbird-chapter-5/" itemprop="url">
                  《鸟哥的私房菜》读书笔记-第五章、首次登陆与在线求助 man page
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-24T00:16:13+08:00" content="2016-11-24">
              2016-11-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/24/linux-vbird-chapter-5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/24/linux-vbird-chapter-5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-首次登陆系统"><a href="#1-首次登陆系统" class="headerlink" title="1. 首次登陆系统"></a>1. 首次登陆系统</h4><h5 id="1-1-首次登陆CentOS-5-x图形接口"><a href="#1-1-首次登陆CentOS-5-x图形接口" class="headerlink" title="1.1 首次登陆CentOS 5.x图形接口"></a>1.1 首次登陆CentOS 5.x图形接口</h5><h5 id="1-2-GNOME的操作与注销"><a href="#1-2-GNOME的操作与注销" class="headerlink" title="1.2 GNOME的操作与注销"></a>1.2 GNOME的操作与注销</h5><h5 id="1-3-KDE的操作与注销"><a href="#1-3-KDE的操作与注销" class="headerlink" title="1.3 KDE的操作与注销"></a>1.3 KDE的操作与注销</h5><h5 id="1-4-X-Window与文本模式的切换"><a href="#1-4-X-Window与文本模式的切换" class="headerlink" title="1.4 X Window与文本模式的切换"></a>1.4 X Window与文本模式的切换</h5><h5 id="1-5-在终端界面登陆linux"><a href="#1-5-在终端界面登陆linux" class="headerlink" title="1.5 在终端界面登陆linux"></a>1.5 在终端界面登陆linux</h5><pre><code>至于提示字符方面，在Linux当中，默认root的提示字符为 # ，而一般身份用户的提示字符为 $ 。
</code></pre><h4 id="2-文本模式下命令的下达"><a href="#2-文本模式下命令的下达" class="headerlink" title="2. 文本模式下命令的下达"></a>2. 文本模式下命令的下达</h4><h5 id="2-1-开始下达命令-语系的支持"><a href="#2-1-开始下达命令-语系的支持" class="headerlink" title="2.1 开始下达命令, 语系的支持"></a>2.1 开始下达命令, 语系的支持</h5><pre><code>命令格式：`command [-options] parameter1 parameter2`
大小写区分
使用反斜杠 `(\)` 来替代[Enter]符号达到换行的作用
命令, 选项, 参数等这几个咚咚中间以空格来区分，不论空几格 shell 都视为一格；
</code></pre><h5 id="2-2-基础命令的操作-date-cal-bc"><a href="#2-2-基础命令的操作-date-cal-bc" class="headerlink" title="2.2 基础命令的操作, date, cal, bc"></a>2.2 基础命令的操作, date, cal, bc</h5><h5 id="2-3-重要的几个热键-Tab-ctrl-c-ctrl-d"><a href="#2-3-重要的几个热键-Tab-ctrl-c-ctrl-d" class="headerlink" title="2.3 重要的几个热键[Tab], [ctrl]-c, [ctrl]-d"></a>2.3 重要的几个热键[Tab], [ctrl]-c, [ctrl]-d</h5><pre><code>1. TAB 
    [Tab] 接在一串命令的第一个字的后面，则为命令补全；
    [Tab] 接在一串命令的第二个字以后时，则为『文件补齐』(因为参数有可能是文件)！
2. [Ctrl]-c 按键：停止
3. [Ctrl]-d 按键：相当于输入exit啊
</code></pre><h5 id="2-4-错误信息的查看"><a href="#2-4-错误信息的查看" class="headerlink" title="2.4 错误信息的查看"></a>2.4 错误信息的查看</h5><h4 id="3-Linux系统的在线求助man-page与info-page"><a href="#3-Linux系统的在线求助man-page与info-page" class="headerlink" title="3. Linux系统的在线求助man page与info page"></a>3. Linux系统的在线求助man page与info page</h4><h5 id="3-1-man-page"><a href="#3-1-man-page" class="headerlink" title="3.1 man page"></a>3.1 man page</h5><pre><code>1. man xxx :manual(操作说明)的简写 xxx为命令
2. 『DATE(1)』 ***1，3和8***
        |代号  代表内容|
        |1|           使用者在shell环境中可以操作的命令或可运行文件|
        |2|           系统核心可呼叫的函数与工具等|
        |3|           一些常用的函数(function)与函式库(library)，大部分为C的函式库(libc)|
        |4|           装置文件的说明，通常在/dev下的文件|
        |5|           配置文件或者是某些文件的格式|
        |6|           游戏(games)|
        |7|           惯例与协议等，例如Linux文件系统、网络协议、ASCII code等等的说明|
        |8|           系统管理员可用的管理命令|
        |9|           跟kernel有关的文件|
3. `man -f [命令或者是数据]`  `man -f man`-&gt;`man 1 man`
    左边为该命令的名字和数字
    右边为简易说明
    等于 `whatis [命令或者是数据]`
4. `man -k 命令或者文件关键词` 通过关键词搜索
    等于`apropos [命令或者是数据]`
5. ***记住常见命令，通过man去查找相关说明 再通过`tab`补全去查找相关的命名，再通过man去查看细节。***
</code></pre><h5 id="3-2-info-page"><a href="#3-2-info-page" class="headerlink" title="3.2 info page"></a>3.2 info page</h5><pre><code>File：代表这个info page的数据是来自info.info文件所提供的；
Node：代表目前的这个页面是属于Top节点。意思是info.info内含有很多信息，而Top仅是info.info文件内的一个节点内容而已；
Next：下一个节点的名称为Getting Started，你也可以按『N』到下个节点去；
Up：回到上一层的节点总揽画面，你也可以按下『U』回到上一层；
Prev：前一个节点。但由于Top是info.info的第一个节点，所以上面没有前一个节点的信息。
</code></pre><h5 id="3-3-其他有用的文件-documents"><a href="#3-3-其他有用的文件-documents" class="headerlink" title="3.3 其他有用的文件(documents)"></a>3.3 其他有用的文件(documents)</h5><pre><code>在文字接口下，有任何你不知道的命令或文件格式这种玩意儿，但是你想要了解他，请赶快使用man或者是info来查询！
而如果你想要架设一些其他的服务，或想要利用一整组软件来达成某项功能时，请赶快到/usr/share/doc 底下查一查有没有该服务的说明档喔！
</code></pre><h4 id="4-超简单文书编辑器：-nano"><a href="#4-超简单文书编辑器：-nano" class="headerlink" title="4. 超简单文书编辑器： nano"></a>4. 超简单文书编辑器： nano</h4><pre><code>[ctrl]-G：取得联机帮助(help)，很有用的！
[ctrl]-X：离开naon软件，若有修改过文件会提示是否需要储存喔！
[ctrl]-O：储存文件，若你有权限的话就能够储存文件了；
[ctrl]-R：从其他文件读入数据，可以将某个文件的内容贴在本文件中；
[ctrl]-W：搜寻字符串，这个也是很有帮助的命令喔！
[ctrl]-C：说明目前光标所在处的行数与列数等信息；
[ctrl]-_：可以直接输入行号，让光标快速移动到该行；
[alt]-Y：校正语法功能开启或关闭(单击开、再单击关)
[alt]-M：可以支持鼠标来移动光标的功能
</code></pre><h4 id="5-正确的关机方法-sync-shutdown-reboot-halt-poweroff-init"><a href="#5-正确的关机方法-sync-shutdown-reboot-halt-poweroff-init" class="headerlink" title="5. 正确的关机方法: sync, shutdown, reboot, halt, poweroff, init"></a>5. 正确的关机方法: sync, shutdown, reboot, halt, poweroff, init</h4><pre><code>将数据同步写入硬盘中的命令： sync
惯用的关机命令： shutdown
重新启动，关机： reboot, halt, poweroff
    可以自由选择关机模式：是要关机、重新启动或进入单人操作模式均可；
    可以配置关机时间: 可以配置成现在立刻关机,      也可以配置某一个特定的时间才关机。
    可以自定义关机信息：在关机之前，可以将自己配置的信息传送给在线 user 。
    可以仅发出警告信息：有时有可能你要进行一些测试，而不想让其他的使用者干扰，         或者是明白的告诉使用者某段时间要注意一下！这个时候可以使用 shutdown        来吓一吓使用者，但却不是真的要关机啦！
    可以选择是否要 fsck 检查文件系统 。
    [root@www ~]# /sbin/shutdown [-t 秒] [-arkhncfF] 时间 [警告信息] 
    选项与参数： 
    -t sec ： -t 后面加秒数，亦即『过几秒后关机』的意思 
    -k     ： 不要真的关机，只是发送警告信息出去！ 
    -r     ： 在将系统的服务停掉之后就重新启动(常用) 
    -h     ： 将系统的服务停掉后，立即关机。 (常用) 
    -n     ： 不经过 init 程序，直接以 shutdown 的功能来关机 
    -f     ： 关机并启动之后，强制略过 fsck 的磁盘检查 
    -F     ： 系统重新启动之后，强制进行 fsck 的磁盘检查 
    -c     ： 取消已经在进行的 shutdown 命令内容。 
</code></pre><h4 id="6-启动过程的问题排解"><a href="#6-启动过程的问题排解" class="headerlink" title="6. 启动过程的问题排解"></a>6. 启动过程的问题排解</h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/22/linux-vbird-chapter-0/" itemprop="url">
                  《鸟哥的私房菜》读书笔记-第零章：计算机概论
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-22T22:16:13+08:00" content="2016-11-22">
              2016-11-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/22/linux-vbird-chapter-0/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/22/linux-vbird-chapter-0/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="第零章-计算机概论"><a href="#第零章-计算机概论" class="headerlink" title="第零章 计算机概论"></a>第零章 计算机概论</h3><h4 id="1-計算机：辅助人脑的好工具"><a href="#1-計算机：辅助人脑的好工具" class="headerlink" title="1. 計算机：辅助人脑的好工具"></a>1. 計算机：辅助人脑的好工具</h4><h5 id="1-1-計算机硬件的五大单元"><a href="#1-1-計算机硬件的五大单元" class="headerlink" title="1.1 計算机硬件的五大单元"></a>1.1 計算机硬件的五大单元</h5><pre><code>1. 输入单元：鼠标、触摸板、键盘等
2. 输出单元：显示器、打印机等
3. cpu中的控制单元
4. cpu中的算数逻辑单元
5. 主内存
</code></pre><h5 id="1-2-CPU的种类"><a href="#1-2-CPU的种类" class="headerlink" title="1.2 CPU的种类"></a>1.2 CPU的种类</h5><pre><code>1. 精简指令集（RISC）reduced instruction set computer
    特点：指令简单，运行快，执行效果好。但是复杂需要多个指令完成
    应用：绝大部分手机
2. 复杂指令集（CISC） complex instruction set computer
    特点：每个小指令可以执行一些低阶的硬件操作，指令多且复杂，长度不一
    应用：PC
</code></pre><h5 id="1-3-周边设备"><a href="#1-3-周边设备" class="headerlink" title="1.3 周边设备"></a>1.3 周边设备</h5><h5 id="1-4-运作流程"><a href="#1-4-运作流程" class="headerlink" title="1.4 运作流程"></a>1.4 运作流程</h5><pre><code>1. cpu-大脑
2. 主板-神经网络
3. 各项周边设备-手脚皮肤
4. 显卡：脑袋中的影像
5. 硬盘：大脑的记忆区块。
6. 主内存：与外界交互短暂保存的影像，***硬盘的数据需要转换到主内存中才能被CPU使用***
</code></pre><h5 id="1-5-計算机分类"><a href="#1-5-計算机分类" class="headerlink" title="1.5 計算机分类"></a>1.5 計算机分类</h5><pre><code>* 超级计算机(Supercomputer)
* 大型计算机(Mainframe Computer)
* 迷你计算机(Minicomputer)
* 工作站(Workstation)
* 微计算机(Microcomputer) 又可以称为个人计算机
</code></pre><h5 id="1-6-計算机上面常用的计算单位-容量、速度等"><a href="#1-6-計算机上面常用的计算单位-容量、速度等" class="headerlink" title="1.6 計算机上面常用的计算单位 (容量、速度等)"></a>1.6 計算机上面常用的计算单位 (容量、速度等)</h5><pre><code>1. bit:0/1 的单位我们称为bit
2. byte: 1byte = 8bits
3. 容量单位用二进制
4. 速度单位用十进制：1GHz = 1000 * 1000 * 1000 Hz
5. 带宽：Mbps Mbit per second 每秒多少Mbit。8M带宽=8Mbits/s = 1Mbytes/s上行和下行速度
6. 硬盘用十进位的单位，所以500GByte代表为500*1000*1000*1000Byte之意。 转成档案的容量单位时使用二进位(1024为底)，所以就成为466GB左右的容量了
7. 硬盘的最小物理量为512Bytes，最小的组成单位为磁区(sector)， 通常硬盘容量的计算采用『多少个sector』
</code></pre><h4 id="2-个人计算机架构与周边设备"><a href="#2-个人计算机架构与周边设备" class="headerlink" title="2. 个人计算机架构与周边设备"></a>2. 个人计算机架构与周边设备</h4><h5 id="2-1-CPU：-CPU的外频与倍频-32位与64位-CPU等级"><a href="#2-1-CPU：-CPU的外频与倍频-32位与64位-CPU等级" class="headerlink" title="2.1 CPU： CPU的外频与倍频, 32位与64位, CPU等级"></a>2.1 CPU： CPU的外频与倍频, 32位与64位, CPU等级</h5><pre><code>0. PC的CPU架构：
    * 北桥：负责连结速度较快的CPU、主内存与显示卡等组件；
    * 南桥：负责连接速度较慢的周边介面， 包括硬盘、USB、网络卡等等。
1. 多核是指一颗cpu封装多个运算核心
2. 不同cpu的脚位不同，需要配套相应主板才能使用
3. cpu的性能影响因素：*微指令集* 和 *频率*
CPU频率为3.0GHz， 表示这颗CPU在一秒内可以进行3.0x109次工作
4. 不同的CPU之间不能单纯的以频率来判断运算效能喔！这是因为每颗CPU的微指令集不相同，架构也不见得一样， 每次频率能够进行的工作指令数也不同之故！所以，频率目前仅能用来比较同款CPU的速度！
5. 外频和倍频：外频指的是CPU与外部组件进行数据传输时的速度，倍频则是 CPU 内部用来加速工作效能的一个倍数， 两者相乘才是CPU的频率速度。我们以刚刚Intel Core 2 Duo E8400 CPU来说，他的频率是3.0GHz， 而外频是333MHz，因此倍频就是9倍罗！(3.0G=333Mx9, 其中1G=1000M)
6. 32位和64位：指北桥的系统总线（前端系统总线）的频宽。
7. 我们看到内存与北桥的频宽为12.8GBytes/s，亦即是1600MHz*64bits = 1600MHz*8Bytes = 12800MByes/s = 12.8GBytes/s
8. CPU每次能够处理的数据量称为字长大小(word size)， 字长大小依据CPU的设计而有32位与64位。我们现在所称的计算机是32或64位主要是依据这个 CPU解析的字长大小而来的！
9. 这也导致32位的CPU最多只能支持最大到4GBytes的内存。
</code></pre><h5 id="2-2-內存"><a href="#2-2-內存" class="headerlink" title="2.2 內存"></a>2.2 內存</h5><pre><code>1. 所以，通常越大的内存代表越快速的系统，这是因为系统不用常常释放一些内存内部的数据。 以服务器来说，主内存的容量有时比CPU的速度还要来的重要的！
2. 双通道：由於所有的数据都必须要存放在主内存，所以主内存的***数据宽度***当然是越大越好。 但传统的系统总线宽度一般大约仅达64位，为了要加大这个宽度，因此芯片组厂商就将两个主内存汇整在一起， 如果一支内存可达64位，两支内存就可以达到128位了，这就是双通道的设计理念。
3. CPU频率与主内存的关系：理论上两者的外频应该 ***一致***
4. CPU内部有第二层缓存(L2 cache)：就不需要北桥传输数据了。DRAM不能满足要求，此时就需要静态随机访问内存(Static Random Access Memory, SRAM)。但是其工艺成本高，不易做成大容量。
5. ROM（只读内存）：BIOS(Basic Input Output System)是一套程序，这套程序是写死到主机板上面的一个内存芯片中， 这个内存芯片在没有通电时也能够将数据记录下来，那就是只读内存(Read Only Memory, ROM)。
6. 
</code></pre><h5 id="2-3-显卡（VGA-Video-Graphics-Array-）："><a href="#2-3-显卡（VGA-Video-Graphics-Array-）：" class="headerlink" title="2.3 显卡（VGA(Video Graphics Array)）："></a>2.3 显卡（VGA(Video Graphics Array)）：</h5><pre><code>一般对於图形影像的显示重点在於***解析度与色彩深度***，因为每个图像显示的颜色会占用掉内存， 因此显示卡上面会有一个内存的容量，这个显示卡内存容量将会影响到最终你的萤幕解析度与色彩深度的喔！
</code></pre><h5 id="2-4-硬盘与储存设备"><a href="#2-4-硬盘与储存设备" class="headerlink" title="2.4 硬盘与储存设备"></a>2.4 硬盘与储存设备</h5><pre><code>1. 简介：硬盘、软盘、MO、CD、DVD、磁带机、随身碟(快闪内存)、还有新一代的蓝光光驱等， 乃至於大型机器的区域网络储存设备(SAN, NAS)等等，都是可以用来储存数据的。而其中最常见的应该就是硬盘了吧！ 
2. 在硬盘盒里面其实是由许许多多的圆形磁碟盘、机械手臂、 磁碟读取头与主轴马达所组成的
3. 实际运作时， 主轴马达让磁碟盘转动，然后机械手臂可伸展让读取头在磁碟盘上头进行读写的动作。 
4. 整个磁碟盘上头好像有多个同心圆绘制出的圆形图，而由圆心以放射状的方式分割出磁碟的最小储存单位，那就是磁区(Sector)， 在物理组成分面，每个磁区大小为512Bytes，这个值是不会改变的。而磁区组成一个圆就成为磁轨(track)， 如果是在多碟的硬盘上面，在所有磁碟盘上面的同一个磁轨可以组成一个磁柱(Cylinder)， 磁柱也是一般我们分割硬盘时的最小单位了！
</code></pre><h5 id="2-5-PCI介面卡"><a href="#2-5-PCI介面卡" class="headerlink" title="2.5 PCI介面卡"></a>2.5 PCI介面卡</h5><h5 id="2-6-主机板"><a href="#2-6-主机板" class="headerlink" title="2.6 主机板"></a>2.6 主机板</h5><pre><code>CMOS与BIOS： CMOS主要的功能为记录主机板上面的重要参数， 包括系统时间、CPU电压与频率、各项设备的I/O位址与IRQ等，由於这些数据的记录要花费电力，因此主机板上面才有电池。 BIOS为写入到主机板上某一块 flash 或 EEPROM 的程序，他可以在开机的时候执行，以载入CMOS当中的参数， 并尝试呼叫储存装置中的开机程序，进一步进入操作系统当中。BIOS程序也可以修改CMOS中的数据， 每种主机板呼叫BIOS设定程序的按键都不同，一般桌上型计算机常见的是使用[del]按键进入BIOS设定画面。
</code></pre><h5 id="2-7-电源供应器"><a href="#2-7-电源供应器" class="headerlink" title="2.7 电源供应器"></a>2.7 电源供应器</h5><h5 id="2-8-选购须知"><a href="#2-8-选购须知" class="headerlink" title="2.8 选购须知"></a>2.8 选购须知</h5><h4 id="3-数据表示方式"><a href="#3-数据表示方式" class="headerlink" title="3. 数据表示方式"></a>3. 数据表示方式</h4><h5 id="3-1-数字系统"><a href="#3-1-数字系统" class="headerlink" title="3.1 数字系统"></a>3.1 数字系统</h5><pre><code>1. 使用二进制。
</code></pre><h5 id="3-2-文字编码系统"><a href="#3-2-文字编码系统" class="headerlink" title="3.2 文字编码系统"></a>3.2 文字编码系统</h5><pre><code>1. 既然计算机都只有记录0/1而已，甚至记录的数据都是使用byte/bit等单位来记录的，那么文字该如何记录啊？ 事实上文字档案也是被记录为0与1而已，而这个档案的内容要被取出来查阅时，必须要经过一个编码系统的处理才行。 所谓的『编码系统』可以想成是一个『字码对照表』
2. 常用的英文编码表为***ASCII系统*** ，这个编码系统中， 每个符号(英文、数字或符号等)都会占用***1bytes***的记录， 因此总共会有28=256种变化。至於中文字当中的编码系统目前最常用的就是big5这个编码表了。 每个中文字会占用2bytes，理论上最多可以有216=65536
3. 由国际组织ISO/IEC跳出来制订了所谓的Unicode编码系统， 我们常常称呼的UTF8或万国码的编码就是这个咚咚。
</code></pre><h4 id="4-软件程序运作"><a href="#4-软件程序运作" class="headerlink" title="4. 软件程序运作"></a>4. 软件程序运作</h4><h5 id="4-1-机器程序与编译程序"><a href="#4-1-机器程序与编译程序" class="headerlink" title="4.1 机器程序与编译程序"></a>4.1 机器程序与编译程序</h5><pre><code>1. 机器码运行的缺点
    需要了解机器语言：机器只认识0与1，因此你必须要学习直接写给机器看的语言！
    需要了解所有硬件的相关功能函数
    程序不具有可携性：每个CPU都有独特的微指令集，同样的，***每个硬件都有其功能函数***。 因此，你为A计算机写的程序，理论上是没有办法在B计算机上面运作的！而且程序码的修改非常困难！ 
    程序具有专一性：因为这样的程序必须要针对硬件功能函数来撰写
2. 高级程序语言编写完成通过编译器编译成机器码，解决了在不同计算机上运行的问题
3. 但是读取数据写入内存，需要分配内存区间并定位，需要重复撰写控制码问题。这就有了操作系统（System Operation）的诞生。
</code></pre><h5 id="4-2-操作系统"><a href="#4-2-操作系统" class="headerlink" title="4.2 操作系统"></a>4.2 操作系统</h5><pre><code>1. 操作系统核心(Kernel)
    1. 定义：操作系统(Operating System, OS)其实也是一组程序， 这组程序的重点在於管理计算机的所有活动以及驱动系统中的所有硬件。
    2. 那么操作系统的功能就是让CPU可以开始判断逻辑与运算数值、 让主内存可以开始载入/读出数据与程序码、让硬盘可以开始被存取、让网络卡可以开始传输数据、 让所有周边可以开始运转等等。总之，硬件的所有动作都必须要透过这个操作系统来达成就是了
    3. 核心程序所放置到内存当中的区块是受保护的！ 并且开机后就一直常驻在内存当中。
2. 系统呼叫(System Call)
    计算机系统主要由硬件构成，然后核心程序主要在管理硬件，提供合理的计算机系统资源分配(包括CPU资源、内存使用资源等等)， 因此只要硬件不同(如x86架构与RISC架构的CPU)，核心就得要进行修改才行。 
3. 在定义上，只要能够让计算机硬件正确无误的运作，那就算是操作系统了。所以说， 操作系统其实就是核心与其提供的介面工具，不过就如同上面讲的，因为最简单的核心缺乏了与使用者沟通的亲和介面， 所以在目前，一般我们提到的『操作系统』都会包含核心与相关的使用者应用软件呢！
4. 基本概念：
    操作系统是参照硬件的规格写成的
    操作系统只是在管理整个硬件资源，包括CPU，内存，输入输出设备
    应用程序都是参考OS提供的开发介面（接口）interface写成的。
5. 核心功能：
    1. 系统呼叫接口 system call interface
    2. 程序管理 process control
    3. 内存管理 memory management
    4. 文件系统管理 filesystem management
    5. 硬件驱动 device driver
6. 驱动程序
    1. 操作系统需要能驱动一个硬件，才能使用它
    2. 一般来说，硬件厂商根据操作系统提供的接口和规范开发驱动程序并提供给消费者。
</code></pre><h5 id="4-3-应用程序"><a href="#4-3-应用程序" class="headerlink" title="4.3 应用程序"></a>4.3 应用程序</h5>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/07/algorithms-sort/" itemprop="url">
                  《算法》读书笔记-排序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-07T19:00:00+08:00" content="2016-10-07">
              2016-10-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/07/algorithms-sort/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/07/algorithms-sort/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&nbsp;&nbsp;最近在重新学习算法，以加深对算法及数据结构的理解，从而在工作中能够根据需求和场景选择合适的算法和数据结构，提升代码的质量和水平。</p>
<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><h2 id="2-1-初级排序"><a href="#2-1-初级排序" class="headerlink" title="2.1 初级排序"></a>2.1 初级排序</h2><p>&nbsp;&nbsp;</p>
<h3 id="2-1-1-2-运行时间"><a href="#2-1-1-2-运行时间" class="headerlink" title="2.1.1.2 运行时间"></a>2.1.1.2 运行时间</h3><p>排序成本的模型：主要是 <strong><em>比较</em></strong> 和 <strong><em>交换</em></strong>。对于不需要比较的算法，计算其 <strong>访问数组的次数</strong>。</p>
<h3 id="2-1-2-选择排序"><a href="#2-1-2-选择排序" class="headerlink" title="2.1.2 选择排序"></a>2.1.2 选择排序</h3><ol>
<li>思路：在数组中找到 <strong><em>最小的元素</em></strong> 然后与数组第一个元素交换，再次找到 <em>剩下元素中最小的元素</em>，如此往复，直到将整个数组排序。</li>
<li><p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span>(j = i+<span class="number">1</span>; j&lt; N; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(less(a[j], a[min] ))min = j;</span><br><span class="line">        &#125;</span><br><span class="line">        exch(a, i, min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于长度为N的数组，选择排序需要 <strong><em>N2/2次比较</em></strong>和 <strong><em>N次交换</em></strong></p>
</li>
</ol>
<h3 id="2-1-3-插入排序"><a href="#2-1-3-插入排序" class="headerlink" title="2.1.3 插入排序"></a>2.1.3 插入排序</h3><ol>
<li>思路：将元素插入已经排序的部分有序数组中，在插入位置之后的数组元素向后移动。其需要时间取决于数组的元素的初始排序。</li>
<li><p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &gt;  <span class="number">0</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (less(a[j], a[j-<span class="number">1</span>])) &#123;</span><br><span class="line">                exch(a[j], a[j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>成本：平均需要~N2/4比较和~N2/4排序。最坏是~N2/2比较和~N2/2交换。最好情况需要N-1比较和0次交换</p>
</li>
<li>规律： 插入排序需要的 <strong><em>交换操作</em></strong> 和数组中 <strong><em>倒置</em></strong>的数量 <strong><em>相同</em></strong>，需要的比较次数大于等于倒置的数量，小于等于倒置的数量加上数组的大小再减一。</li>
<li>选择排序和插入排序的时间都是 <strong><em>平方级别</em></strong>的。</li>
</ol>
<h3 id="2-1-6希尔排序"><a href="#2-1-6希尔排序" class="headerlink" title="2.1.6希尔排序"></a>2.1.6希尔排序</h3><ol>
<li>思路：希尔排序是基于插入排序做改进。<br>使数组中任意相隔为h的元素都是有序的，一个 <em>h有序</em>的数组就是 <em>h个相互独立的有序数组</em> 编织在一起组成的一个数组。</li>
<li><p>代码:此为升序排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> h =<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (h &lt; N/<span class="number">3</span>) h = <span class="number">3</span>*h + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (h &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N;i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i+h; j&gt;= h &amp;&amp; less(a[j], a[j-h]);j- = h) &#123;</span><br><span class="line">                exch(a, j, j-h);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        h = h/<span class="number">3</span>;</span><br><span class="line">    &#125;                                             </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>成本：此算法在最坏情况下的比较次数和 <strong><em>N3/2</em></strong>成正比。希尔排序的运行时间突破了 <strong><em>平方级别</em></strong>。因为接下来的算法虽然比希尔排序高效，但是更复杂，所以<strong><em>先用希尔排序</em></strong>，再根据实际情况进行优化或者替代。</p>
</li>
</ol>
<h2 id="2-2-归并排序"><a href="#2-2-归并排序" class="headerlink" title="2.2 归并排序"></a>2.2 归并排序</h2><ol>
<li>思路：将数组分成两半进行排序，然后再归并到一起。如此递归，最终将数组排序。这种分治的思想有 <strong><em>自顶向下</em></strong>和 <strong><em>自底向上</em></strong>两种解决的方法。</li>
<li>代码：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个只有在lo hi相差1的时候才能保证merge的结果是有序的，所以到采用分治的思想</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = lo;</span><br><span class="line">    <span class="keyword">int</span> j = mid+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo;k &lt;= hi;k++) &#123;</span><br><span class="line">        aux[k] = a[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid) a[k] = aux[j++];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; h ) a[k] = aux[i++];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (less(a[i], a[j])) a[k] = a[i++];</span><br><span class="line">        <span class="keyword">else</span> a[k] = a[j++];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>自顶向下的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span> <span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lo &gt;= hi)<span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">int</span> mid = lo + (hi -lo)/<span class="number">2</span>;</span><br><span class="line">    sort(a, lo, mid);</span><br><span class="line">    sort(a, mid+<span class="number">1</span>, hi);</span><br><span class="line">    merge(a, lo, mid, hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>自底向上的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt; N; sz+=sz)&#123;<span class="comment">//子数组的大小</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> lo = <span class="number">0</span>; lo &lt; N-sz; lo+=sz+sz)&#123;</span><br><span class="line">            merge (lo, lo+sz-<span class="number">1</span>, Math.min( (lo + sz + sz-<span class="number">1</span>) , (N-<span class="number">1</span>)) );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>成本：时间与NlogN成正比；所需的额外空间和N成正比。需要 <strong><em>1/2NlgN至NlgN次比较</em></strong>，最多 <strong><em>6NlgN次访问</em></strong>。</li>
</ol>
<h2 id="2-3-快速排序"><a href="#2-3-快速排序" class="headerlink" title="2.3 快速排序"></a>2.3 快速排序</h2><ol>
<li>思路：快速排序也是采用分治思想。其与归并排序是互补的。归并排序递归调用发生在处理整个数组 <em>之前</em>，快速排序发生在处理整个数组 <em>之后</em>。归并排序数组被分成两半，快速排序数组被 <em>切分</em>取决于数组的内容。</li>
<li>代码：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hi&lt;=lo)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> j = partition(a, lo, hi);<span class="comment">//找出切分的元素</span></span><br><span class="line">    sort(a, lo, j-<span class="number">1</span>);<span class="comment">//左边排序</span></span><br><span class="line">    sort(a, j+<span class="number">1</span>, hi);<span class="comment">//右边排序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v = a[lo];</span><br><span class="line">    <span class="keyword">int</span> i = lo;</span><br><span class="line">    <span class="keyword">int</span> j =hi+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(less(a[++i],v))&#123;<span class="keyword">if</span>(i==hi)<span class="keyword">break</span>;&#125;</span><br><span class="line">        <span class="keyword">while</span>(less(v,a[--j]))&#123;<span class="keyword">if</span>(j==lo)<span class="keyword">break</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;=j)<span class="keyword">break</span>;</span><br><span class="line">        exah(a,i,j);</span><br><span class="line">    &#125;</span><br><span class="line">    exah(a,lo,j);</span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>三向切分的快速排序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(lo &gt;= hi)<span class="keyword">return</span>;</span><br><span class="line">   <span class="keyword">int</span> lt =lo;</span><br><span class="line">   <span class="keyword">int</span> i =lo+<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">int</span> gt= hi;</span><br><span class="line">   <span class="keyword">int</span> v = a[lo];</span><br><span class="line">   <span class="keyword">while</span>(i &lt;= gt)&#123;</span><br><span class="line">       <span class="keyword">int</span> cmp = a.compare(v);</span><br><span class="line">       <span class="keyword">if</span>(cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">           exch(lt++,i++);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span>(cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">           exch(gt--,i++);</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           i++;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   sort(a,lo,lt-<span class="number">1</span>);</span><br><span class="line">   sort(a,gt+<span class="number">1</span>,hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="2-4-优先队列"><a href="#2-4-优先队列" class="headerlink" title="2.4 优先队列"></a>2.4 优先队列</h2><h3 id="优先队列"><a href="#优先队列" class="headerlink" title="优先队列"></a>优先队列</h3><ol>
<li>思路：<blockquote>
<p>当一棵二叉树的每个结点都大于等于它的两个子结点。这就是 <strong><em>堆有序</em></strong>。<br>二叉堆就是一组能够用堆有序的完全二叉树排序的元素，并在数组中按照层级储存。<br>用N+1的数组来表示大小为N的堆</p>
</blockquote>
</li>
<li>代码：<br>由下至上的堆有序化（上浮）<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swin</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(k&gt;<span class="number">1</span> &amp;&amp; less(k/<span class="number">2</span>, k))&#123;</span><br><span class="line">        exch(a,k/<span class="number">2</span>,k);</span><br><span class="line">        k=k/<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>由上至下的堆有序化（下浮）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">   <span class="keyword">while</span>(<span class="number">2</span>*k&lt;=N)&#123;</span><br><span class="line">        <span class="keyword">int</span> j =k*<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (j&lt;N &amp;&amp; less(j, j+<span class="number">1</span>))&#123;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!less(k, j))<span class="keyword">break</span>;</span><br><span class="line">        exch(k,j);</span><br><span class="line">        k = j;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">队列重要方法的实现</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;<span class="comment">//索引</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key v)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//pq是一个数据</span></span><br><span class="line">        pq[++N] = v;</span><br><span class="line">        swin(N);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">delMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Key max = pq[<span class="number">0</span>];</span><br><span class="line">        exch(<span class="number">1</span>,N--);</span><br><span class="line">        pq[N+<span class="number">1</span>] = <span class="keyword">null</span>;</span><br><span class="line">        sink(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-4-5另一种排序"><a href="#2-4-5另一种排序" class="headerlink" title="2.4.5另一种排序"></a>2.4.5另一种排序</h3><ol>
<li>思路：分为堆的构造和下沉排序。</li>
</ol>
<ul>
<li>堆的构造：扫描数组一半的数据，通过下沉操作构造出堆<blockquote>
<p>用下沉操作由N个元素组成的堆只需少于2N次比较以及少于N次交换</p>
</blockquote>
</li>
<li>从右到左将最后的堆元素与堆最大的元素（位置1的元素）交换，然后将最大的元素移除堆，即缩小堆的范围。而交换后的元素通过下沉操作到达合适的位置。有点类似 <strong><em>选择排序</em></strong>的思想。但是比较的次数少很多，因为堆能很快在未排序的部分找到最大的元素。</li>
</ul>
<h2 id="2-5-应用"><a href="#2-5-应用" class="headerlink" title="2.5 应用"></a>2.5 应用</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/dp-behaviour-memento/" itemprop="url">
                  设计模式-行为型-备忘录模式(Memento Pattern)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-29T22:07:00+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/29/dp-behaviour-memento/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/29/dp-behaviour-memento/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>&nbsp;&nbsp;在不破坏封装的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，这样可以在以后将对象恢复到原先保存的状态。它是一种对象行为型模式，其别名为Token。</p>
<h3 id="角色分析"><a href="#角色分析" class="headerlink" title="角色分析"></a>角色分析</h3><ul>
<li>Originator（原发器）：它是一个普通类，可以创建一个备忘录，并存储它的当前内部状态，也可以使用备忘录来恢复其内部状态，一般将需要保存内部状态的类设计为原发器。+</li>
<li>Memento（备忘录)：存储原发器的内部状态，根据原发器来决定保存哪些内部状态。备忘录的设计一般可以参考原发器的设计，根据实际需要确定备忘录类中的属性。需要注意的是，除了原发器本身与负责人类之外，备忘录对象不能直接供其他类使用，原发器的设计在不同的编程语言中实现机制会有所不同。</li>
<li>Caretaker（负责人）：负责人又称为管理者，它负责保存备忘录，但是不能对备忘录的内容进行操作或检查。在负责人类中可以存储一个或多个备忘录对象，它只负责存储对象，而不能修改对象，也无须知道对象的实现细节。<h3 id="UML图"><a href="#UML图" class="headerlink" title="UML图"></a>UML图</h3><img src="http://oa5ova13h.bkt.clouddn.com/memento_classic.png" alt="备忘录模式"><h3 id="典型代码"><a href="#典型代码" class="headerlink" title="典型代码"></a>典型代码</h3>原发器：Originator<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dp.memento;  </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Originator</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">private</span> String state;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Originator</span><span class="params">()</span></span>&#123;&#125;  </span><br><span class="line">    </span><br><span class="line">    　　<span class="comment">// 创建一个备忘录对象  </span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Memento <span class="title">createMemento</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    　　　　<span class="keyword">return</span> <span class="keyword">new</span> Memento(<span class="keyword">this</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">    　　<span class="comment">// 根据备忘录对象恢复原发器状态  </span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restoreMemento</span><span class="params">(Memento m)</span> </span>&#123;  </span><br><span class="line">    　　　　 state = m.state;  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(String state)</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">this</span>.state=state;  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getState</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.state;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>备忘录类：Memento<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dp.memento;  </span><br><span class="line">    <span class="comment">//备忘录类，默认可见性，包内可见  </span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Memento</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">private</span> String state;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Memento</span><span class="params">(Originator o)</span> </span>&#123;  </span><br><span class="line">    　　　　state = o.getState();  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(String state)</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">this</span>.state=state;  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getState</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.state;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>负责人：Caretaker<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dp.memento;  </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Caretaker</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">private</span> Memento memento;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> Memento <span class="title">getMemento</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> memento;  </span><br><span class="line">        &#125;  </span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMemento</span><span class="params">(Memento memento)</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">this</span>.memento=memento;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="示例UML图"><a href="#示例UML图" class="headerlink" title="示例UML图"></a>示例UML图</h3><p><img src="http://oa5ova13h.bkt.clouddn.com/memento_example.png" alt=""></p>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><p>&nbsp;&nbsp;下面示例中，<br>原发器：Man<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aaronchan.memento;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Man</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> attackPower;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> defencePower;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Man</span><span class="params">(<span class="keyword">int</span> attackPower, <span class="keyword">int</span> defencePower)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.attackPower = attackPower;</span><br><span class="line">        <span class="keyword">this</span>.defencePower = defencePower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attackPowerIncrease</span><span class="params">(<span class="keyword">int</span> increaseAttackPower)</span> </span>&#123;</span><br><span class="line">        attackPower += increaseAttackPower;</span><br><span class="line">        <span class="keyword">if</span> (attackPower &gt; MAX) &#123;</span><br><span class="line">            attackPower = MAX;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attackPowerDecrease</span><span class="params">(<span class="keyword">int</span> decreaseAttackPower)</span> </span>&#123;</span><br><span class="line">        attackPower -= decreaseAttackPower;</span><br><span class="line">        <span class="keyword">if</span> (attackPower &lt; MIN) &#123;</span><br><span class="line">            attackPower = MIN;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">defencePowerIncrease</span><span class="params">(<span class="keyword">int</span> increaseDefencePower)</span> </span>&#123;</span><br><span class="line">        defencePower += increaseDefencePower;</span><br><span class="line">        <span class="keyword">if</span> (defencePower &gt; MAX) &#123;</span><br><span class="line">            defencePower = MAX;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">defencePowerDecrease</span><span class="params">(<span class="keyword">int</span> decreaseDefencePower)</span> </span>&#123;</span><br><span class="line">        defencePower -= decreaseDefencePower;</span><br><span class="line">        <span class="keyword">if</span> (defencePower &lt; MIN) &#123;</span><br><span class="line">            defencePower = MIN;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ManMemento <span class="title">getMemento</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ManMementoInternal manMemento = <span class="keyword">new</span> ManMementoInternal();</span><br><span class="line">        manMemento.setAttackPower(attackPower);</span><br><span class="line">        manMemento.setDefencePower(defencePower);</span><br><span class="line">        <span class="keyword">return</span> manMemento;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMemento</span><span class="params">(ManMemento manMemento)</span> </span>&#123;</span><br><span class="line">        ManMementoInternal manMementoInternal = (ManMementoInternal) manMemento;</span><br><span class="line">        <span class="keyword">this</span>.attackPower = (manMementoInternal.getAttackPower());</span><br><span class="line">        <span class="keyword">this</span>.defencePower = (manMementoInternal.getDefencePower());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Man attackPower:"</span> + attackPower + <span class="string">", defencePower:"</span> + defencePower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ManMementoInternal</span> <span class="keyword">implements</span> <span class="title">ManMemento</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> attackPower;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> defencePower;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAttackPower</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> attackPower;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAttackPower</span><span class="params">(<span class="keyword">int</span> attackPower)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.attackPower = attackPower;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDefencePower</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> defencePower;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDefencePower</span><span class="params">(<span class="keyword">int</span> defencePower)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.defencePower = defencePower;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>备忘接口：ManMemento<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aaronchan.memento;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ManMemento</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>负责人：ManMementoCareTaker<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aaronchan.memento;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ManMementoCareTaker</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">private</span> List&lt;ManMemento&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addManMemento</span><span class="params">(ManMemento manMemento)</span> </span>&#123;</span><br><span class="line">            list.add(manMemento);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> ManMemento <span class="title">getManMemento</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(index);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>客户端：App<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aaronchan.client;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> ManMementoCareTaker careTaker;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            careTaker = <span class="keyword">new</span> ManMementoCareTaker();</span><br><span class="line">            Man man = <span class="keyword">new</span> Man(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">            man.attackPowerIncrease(<span class="number">5</span>);</span><br><span class="line">            man.defencePowerDecrease(<span class="number">2</span>);</span><br><span class="line">            save(man);</span><br><span class="line">            man.attackPowerIncrease(<span class="number">50</span>);</span><br><span class="line">            man.defencePowerIncrease(<span class="number">40</span>);</span><br><span class="line">            save(man);</span><br><span class="line">            man.attackPowerDecrease(<span class="number">20</span>);</span><br><span class="line">            man.defencePowerIncrease(<span class="number">30</span>);</span><br><span class="line">            save(man);</span><br><span class="line">            man.attackPowerIncrease(<span class="number">10</span>);</span><br><span class="line">            man.defencePowerDecrease(<span class="number">20</span>);</span><br><span class="line">            save(man);</span><br><span class="line">            </span><br><span class="line">            undo(man);</span><br><span class="line">            undo(man);</span><br><span class="line">            undo(man);</span><br><span class="line">            undo(man);</span><br><span class="line">    </span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Man man)</span> </span>&#123;</span><br><span class="line">            index++;</span><br><span class="line">            System.out.println(man.toString());</span><br><span class="line">            careTaker.addManMemento(man.getMemento());</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">undo</span><span class="params">(Man man)</span> </span>&#123;</span><br><span class="line">            man.setMemento(careTaker.getManMemento(index));</span><br><span class="line">            System.out.println(man.toString());</span><br><span class="line">            index--;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>它提供了一种状态恢复的实现机制，使得用户可以方便地回到一个特定的历史步骤，当新的状态无效或者存在问题时，可以使用暂时存储起来的备忘录将状态复原。</li>
<li>备忘录实现了对信息的封装，一个备忘录对象是一种原发器对象状态的表示，不会被其他代码所改动。备忘录保存了原发器的状态，采用列表、堆栈等集合来存储备忘录对象可以实现多次撤销操作。<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3></li>
<li>资源消耗过大，如果需要保存的原发器类的成员变量太多，就不可避免需要占用大量的存储空间，每保存一次对象的状态都需要消耗一定的系统资源。<h3 id="适用环境"><a href="#适用环境" class="headerlink" title="适用环境"></a>适用环境</h3></li>
<li>保存一个对象在某一个时刻的全部状态或部分状态，这样以后需要时它能够恢复到先前的状态，实现撤销操作。</li>
<li>防止外界对象破坏一个对象历史状态的封装性，避免将对象历史状态的实现细节暴露给外界对象。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/headicon.jpg"
               alt="AaronChan" />
          <p class="site-author-name" itemprop="name">AaronChan</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">37</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Aaron-Chan" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AaronChan</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"aaronchan"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  

  

  

</body>
</html>
